!function(e){function webpackJsonpCallback(t){for(var s,o,i=t[0],u=t[1],l=t[2],c=0,_=[];c<i.length;c++)o=i[c],r[o]&&_.push(r[o][0]),r[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);for(a&&a(t);_.length;)_.shift()();return n.push.apply(n,l||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<n.length;t++){for(var s=n[t],o=!0,i=1;i<s.length;i++){var a=s[i];0!==r[a]&&(o=!1)}o&&(n.splice(t--,1),e=__webpack_require__(__webpack_require__.s=s[0]))}return e}var t={},r={0:0},n=[];function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=webpackJsonpCallback,s=s.slice();for(var i=0;i<s.length;i++)webpackJsonpCallback(s[i]);var a=o;n.push([0,1]),checkDeferredModules()}({"./src/app.js":function(e,t,r){"use strict";r("./node_modules/bootstrap/dist/js/bootstrap.js"),r("./src/scss/osweb.scss"),r("./node_modules/alertifyjs/build/css/alertify.css"),r("./node_modules/alertifyjs/build/css/themes/bootstrap.css");var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/index.js"));"undefined"!=typeof window&&(window.alertify=r("./node_modules/alertifyjs/build/alertify.js"),window.alertify.defaults.theme.ok="btn btn-primary",window.alertify.defaults.theme.cancel="btn btn-light",window.alertify.defaults.theme.input="form-control",window.osweb=n.default,window.osweb.printVersionInfo())},"./src/js/dependencies/PixiTextInput.js":function(e,t,r){"use strict";var n;function PixiTextInput(e,t){if(n.Container.call(this),e||(e=""),e=e.toString(),t&&t.wordWrap)throw Error("wordWrap is not supported for input fields");this._text=e,this.localWidth=100,this._backgroundColor=16777215,this._caretColor=0,this._background=!0,this.style=t,this.textField=new n.Text(this._text,t),this.localHeight=this.textField.style.fontSize+this.textField.style.strokeThickness,this.backgroundGraphics=new n.Graphics,this.textFieldMask=new n.Graphics,this.caret=new n.Graphics,this.drawElements(),this.addChild(this.backgroundGraphics),this.addChild(this.textField),this.addChild(this.caret),this.addChild(this.textFieldMask),this.scrollIndex=0,this._caretIndex=0,this.caretFlashInterval=null,this.blur(),this.updateCaretPosition(),this.backgroundGraphics.interactive=!0,this.backgroundGraphics.buttonMode=!0,this.backgroundGraphics.cursor="text",this.backgroundGraphics.mousedown=this.onBackgroundMouseDown.bind(this),this.keyEventClosure=this.onKeyEvent.bind(this),this.windowBlurClosure=this.onWindowBlur.bind(this),this.documentMouseDownClosure=this.onDocumentMouseDown.bind(this),this.isFocusClick=!1,this.updateText(),this.textField.mask=this.textFieldMask,this.keypress=null,this.keydown=null,this.change=null,this.update=null,this.widget=null}n=r("./node_modules/pixi.js/lib/index.js"),PixiTextInput.prototype=Object.create(n.Container.prototype),PixiTextInput.prototype.constructor=PixiTextInput,PixiTextInput.prototype.onBackgroundMouseDown=function(e){var t=this.toLocal(e.data.global).x;this._caretIndex=this.getCaretIndexByCoord(t),this.updateCaretPosition(),this.focus(),this.isFocusClick=!0;var r=this;setTimeout(function(){r.isFocusClick=!1},0)},PixiTextInput.prototype.focus=function(){this.blur(),document.addEventListener("keydown",this.keyEventClosure),document.addEventListener("keypress",this.keyEventClosure),document.addEventListener("mousedown",this.documentMouseDownClosure),window.addEventListener("blur",this.windowBlurClosure),this.showCaret()},PixiTextInput.prototype.onKeyEvent=function(e){if("keypress"===e.type){if(e.charCode<32)return;this._text=this._text.substring(0,this._caretIndex)+String.fromCharCode(e.charCode)+this._text.substring(this._caretIndex),this._caretIndex++,this.ensureCaretInView(),this.showCaret(),this.updateText(),this.trigger(this.keypress,e),this.trigger(this.change)}if("keydown"===e.type){switch(e.keyCode){case 8:this._caretIndex>0&&(this._text=this._text.substring(0,this._caretIndex-1)+this._text.substring(this._caretIndex),this._caretIndex--,this.ensureCaretInView(),this.showCaret(),this.updateText()),e.preventDefault(),this.trigger(this.change);break;case 46:this._text=this._text.substring(0,this._caretIndex)+this._text.substring(this._caretIndex+1),this.ensureCaretInView(),this.updateCaretPosition(),this.showCaret(),this.updateText(),e.preventDefault(),this.trigger(this.change);break;case 39:this._caretIndex++,this._caretIndex>this._text.length&&(this._caretIndex=this._text.length),this.ensureCaretInView(),this.updateCaretPosition(),this.showCaret(),this.updateText();break;case 37:this._caretIndex--,this._caretIndex<0&&(this._caretIndex=0),this.ensureCaretInView(),this.updateCaretPosition(),this.showCaret(),this.updateText()}this.trigger(this.keydown,e)}null!=this.update&&this.update(this.widget,e)},PixiTextInput.prototype.ensureCaretInView=function(){for(this.updateCaretPosition();this.caret.position.x>=this.localWidth-1;)this.scrollIndex++,this.updateCaretPosition();for(;this.caret.position.x<0;)this.scrollIndex-=2,this.scrollIndex<0&&(this.scrollIndex=0),this.updateCaretPosition()},PixiTextInput.prototype.blur=function(){document.removeEventListener("keydown",this.keyEventClosure),document.removeEventListener("keypress",this.keyEventClosure),document.removeEventListener("mousedown",this.documentMouseDownClosure),window.removeEventListener("blur",this.windowBlurClosure),this.hideCaret()},PixiTextInput.prototype.onDocumentMouseDown=function(){this.isFocusClick||this.blur()},PixiTextInput.prototype.onWindowBlur=function(){this.blur()},PixiTextInput.prototype.updateCaretPosition=function(){if(this._caretIndex<this.scrollIndex)this.caret.position.x=-1;else{var e=this._text.substring(0,this._caretIndex).substring(this.scrollIndex);this.caret.position.x=this.textField.context.measureText(e).width}},PixiTextInput.prototype.updateText=function(){this.textField.text=this._text.substring(this.scrollIndex)},PixiTextInput.prototype.drawElements=function(){this.backgroundGraphics.clear(),this.backgroundGraphics.beginFill(this._backgroundColor),this._background&&this.backgroundGraphics.drawRect(0,0,this.localWidth,this.localHeight),this.backgroundGraphics.endFill(),this.backgroundGraphics.hitArea=new n.Rectangle(0,0,this.localWidth,this.localHeight),this.textFieldMask.clear(),this.textFieldMask.beginFill(this._backgroundColor),this.textFieldMask.drawRect(0,0,this.localWidth,this.localHeight),this.textFieldMask.endFill(),this.caret.clear(),this.caret.beginFill(this._caretColor),this.caret.drawRect(1,1,1,this.localHeight-2),this.caret.endFill()},PixiTextInput.prototype.showCaret=function(){this.caretFlashInterval&&(clearInterval(this.caretFlashInterval),this.caretFlashInterval=null),this.caret.visible=!0,this.caretFlashInterval=setInterval(this.onCaretFlashInterval.bind(this),500)},PixiTextInput.prototype.hideCaret=function(){this.caretFlashInterval&&(clearInterval(this.caretFlashInterval),this.caretFlashInterval=null),this.caret.visible=!1},PixiTextInput.prototype.onCaretFlashInterval=function(){this.caret.visible=!this.caret.visible},PixiTextInput.prototype.getCaretIndexByCoord=function(e){for(var t=1e4,r=0,n=this._text.substring(this.scrollIndex),s=0;s<n.length+1;s++){var o=n.substring(0,s),i=this.textField.context.measureText(o).width;Math.abs(i-e)<t&&(t=Math.abs(i-e),r=s)}return this.scrollIndex+r},Object.defineProperty(PixiTextInput.prototype,"width",{get:function get(){return this.scale.x*this.getLocalBounds().width},set:function set(e){this.localWidth=e,this.drawElements(),this.ensureCaretInView(),this.updateText()}}),Object.defineProperty(PixiTextInput.prototype,"text",{get:function get(){return this._text},set:function set(e){this._text=e.toString(),this.scrollIndex=0,this.caretIndex=0,this.blur(),this.updateText()}}),Object.defineProperty(PixiTextInput.prototype,"backgroundColor",{get:function get(){return this._backgroundColor},set:function set(e){this._backgroundColor=e,this.drawElements()}}),Object.defineProperty(PixiTextInput.prototype,"caretColor",{get:function get(){return this._caretColor},set:function set(e){this._caretColor=e,this.drawElements()}}),Object.defineProperty(PixiTextInput.prototype,"background",{get:function get(){return this._background},set:function set(e){this._background=e,this.drawElements()}}),PixiTextInput.prototype.setText=function(e){this.text=e},PixiTextInput.prototype.trigger=function(e,t){e&&e(t)},e.exports=PixiTextInput},"./src/js/osweb/backends/canvas.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),s=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/backends/styles.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function Canvas(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Canvas),this.auto_prepare=void 0===t||t,this.experiment=e,this._container=new n.Container,this._font_string="bold 18px Courier New",this._height=this.experiment._runner._renderer.height,this._styles=new s.default,this._width=this.experiment._runner._renderer.width}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Canvas,[{key:"_arrow_shape",value:function _arrow_shape(e,t,r,n,s,o,i){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(e-r,2)),u=Math.atan2(n-t,r-e),l=(1-s)/2,c=[r,n],_=[e+(s/=2)*i*Math.cos(u-Math.PI/2),t+s*i*Math.sin(u-Math.PI/2)],f=[_[0]+o*Math.cos(u)*a,_[1]+o*Math.sin(u)*a],p=[f[0]+l*i*Math.cos(u-Math.PI/2),f[1]+l*i*Math.sin(u-Math.PI/2)],h=[e+s*i*Math.cos(u+Math.PI/2),t+s*i*Math.sin(u+Math.PI/2)],d=[h[0]+o*Math.cos(u)*a,h[1]+o*Math.sin(u)*a];return[_,f,p,c,[d[0]+l*i*Math.cos(u+Math.PI/2),d[1]+l*i*Math.sin(u+Math.PI/2)],d,h]}},{key:"_containsHTML",value:function _containsHTML(e){var t;try{return t=(new DOMParser).parseFromString(e,"text/html"),Array.from(t.childNodes).some(function(e){return 1===e.nodeType})}catch(e){console.error("Could not parse DOM: "+e.message)}}},{key:"_exitDisplay",value:function _exitDisplay(){this.clear(),this.experiment._runner._renderer.view.style.cursor="default",this.experiment._runner._renderer.resize(800,600),this.experiment._runner._renderer.backgroundColor=0,this.experiment._runner._renderer.clear(),this.experiment._runner._renderer.render(this._container)}},{key:"_getStyle",value:function _getStyle(e){if(void 0===e)return this._styles;var t=new s.default;return Object.assign(t,e),t}},{key:"_getTextBaseline",value:function _getTextBaseline(e,t,r,n){var s=document.createElement("span");s.style.fontFamily=t||"Arial",s.style.fontWeight=!0===n?"bold":"normal",s.style.fontSize=String(r)+"px",s.innerHTML=e;var o=document.createElement("div");o.style.display="inline-block",o.style.lineHeight="normal";var i=document.createElement("div");i.append(s,o),document.body.appendChild(i);var a,u,l={};return o.style.verticalAlign="baseline",a=o.getBoundingClientRect().top+document.body.scrollTop,u=s.getBoundingClientRect().top+document.body.scrollTop,l.ascent=Math.round(a-u),o.style.verticalAlign="bottom",a=o.getBoundingClientRect().top+document.body.scrollTop,u=s.getBoundingClientRect().top+document.body.scrollTop,l.height=Math.round(a-u),l.descent=l.height-l.ascent,document.body.removeChild(i),l}},{key:"_match_env",value:function _match_env(e){return["c","circular","round"].includes(e)?"c":["g","gaussian","gauss","normal","rect","square"].includes(e)?"g":["rectangular","rectangle"].includes(e)?"r":["l","linear","lin","ln"].includes(e)?"l":"g"}},{key:"_parseHtmlNode",value:function _parseHtmlNode(e,t,r){var s=this._getStyle(r);switch(e.nodeType){case 1:switch(e.nodeName){case"B":s.font_bold=!0;break;case"BR":t.row.height=t.row.height>0?t.row.height:t.prev_height,t.row.width=t.x_pos>t.row.width?t.x_pos:t.row.width,t.width=t.width>t.row.width?t.width:t.row.width,t.y_pos=t.y_pos+t.row.height,t.x_pos=4,t.height=t.height+t.row.height,t.rows.push(t.row),t.row={ascent:0,width:0,height:0,text_elements:[],text_dimensions:[],text_underline:[]};break;case"I":s.font_italic=!0;break;case"SPAN":if(e.attributes.length>0)for(var o=e.attributes[0].value.split(";"),i=0;i<o.length;i++){var a=o[i].slice(0,o[i].indexOf(":")),u=o[i].slice(o[i].indexOf(":")+1,o[i].length);switch(a){case"color":s.color=u;break;case"font-size":s.font_size=u;break;case"font-family":s.font_family=u}}break;case"U":s.font_underline=!0}break;case 3:var l={fontFamily:s.font_family,fontStyle:!0===s.font_italic?"italic":"normal",fontWeight:!0===s.font_bold?"bold":"normal",fontSize:s.font_size,fill:s.color},c={},_=new n.Text(e.textContent,l);_.getBounds(!1,c);var f=this._getTextBaseline(e.textContent,s.font_family,s.font_size,s.font_bold);_.x=t.x_pos,_.y=t.y_pos,t.x_pos=t.x_pos+c.width,t.row.width=t.x_pos>t.row.width?t.x_pos:t.row.width,t.width=t.width>t.row.width?t.width:t.row.width,t.row.height=c.height+1>t.row.height?c.height+1:t.row.height,t.row.ascent=f.ascent>t.row.ascent?f.ascent:t.row.ascent,t.prev_height=t.row.height,t.row.text_elements.push(_),t.row.text_dimensions.push(f),t.row.text_underline.push(s.font_underline)}for(var p=0;p<e.childNodes.length;p++)this._parseHtmlNode(e.childNodes[p],t,s,p===e.childNodes.length-1)}},{key:"_resizeContainer",value:function _resizeContainer(e,t){this.experiment._runner._container.style.width=e+"px",this.experiment._runner._container.style.height=t+"px"}},{key:"arrow",value:function arrow(e,t,r,n,s,o,i,a){var u=this._arrow_shape(e,t,r,n,s,o,i);this.polygon(u,a)}},{key:"circle",value:function circle(e,t,r,s){var o=this._getStyle(s),circle=new n.Graphics;circle.lineStyle(o.penwidth,o.color,1),!0===o.fill?(circle.beginFill(o.background_color),circle.drawCircle(0,0,r),circle.endFill()):circle.drawCircle(0,0,r),circle.x=e,circle.y=t,this._container.addChild(circle)}},{key:"clear",value:function clear(e,t){for(var r=this._container.children.length-1;r>=0;r--)this._container.removeChild(this._container.children[r])}},{key:"copy",value:function copy(e){this.clear();var t=!0,r=!1,n=void 0;try{for(var s,o=e._container.children[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var i=s.value;this._container.addChild(i.clone())}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"ellipse",value:function ellipse(e,t,r,s,o){var i=this._getStyle(o),ellipse=new n.Graphics;ellipse.lineStyle(i.penwidth,i.color,1),!0===i.fill?(ellipse.beginFill(i.background_color),ellipse.drawEllipse(0,0,r/2,s/2),ellipse.endFill()):ellipse.drawEllipse(0,0,r/2,s/2),ellipse.x=e+r/2,ellipse.y=t+s/2,this._container.addChild(ellipse)}},{key:"fixdot",value:function fixdot(e,t,r,n){r=void 0===r?"default":r;var o=this._getStyle(n);void 0===e&&(e=!0===this.uniform_coordinates?0:this._width/2),void 0===t&&(t=!0===this.uniform_coordinates?0:this._height/2);var i=4;-1!==r.indexOf("large")?i=16:-1!==r.indexOf("medium")||"default"===r?i=8:-1!==r.indexOf("small")?i=4:this.experiment._runner._debugger.addError("Unknown style: "+r);var a=new s.default;-1!==r.indexOf("open")||"default"===r?(a._fill=!0,a._background_color=o.color,a._color=o.color,this.ellipse(e-i,t-i,2*i,2*i,a),a._background_color=o.background_color,a._color=o.background_color,this.ellipse(e-2,t-2,4,4,a)):-1!==r.indexOf("filled")?(a._fill=!0,a._background_color=o.color,a._color=o.color,this.ellipse(e-i,t-i,2*i,2*i,a)):-1!==r.indexOf("cross")?(a._penwidth=1,a._color=o.color,this.line(e,t-i,e,t+i,a),this.line(e-i,t,e+i,t,a)):this.experiment._runner._debugger.addError("Unknown style: "+r)}},{key:"gabor",value:function gabor(e,t,r,s,o,i,a,u,l,c,_){o=this._match_env(o);var f=document.createElement("canvas");f.width=i,f.height=i;var p=f.getContext("2d"),h=p.getImageData(0,0,i,i);r=Math.PI*r/180,l=this._styles._convertColorValueToRGB(l),c=this._styles._convertColorValueToRGB(c);for(var d=0;d<i;d++)for(var y=0;y<i;y++){var m=d-.5*i,v=y-.5*i,b=Math.atan2(v,m)+r,g=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),w=g*Math.cos(b),x=g*Math.sin(b),P=void 0,O=.5+.5*Math.cos(2*Math.PI*(w*s+u));P="g"===o?Math.exp(-.5*Math.pow(w/a,2)-.5*Math.pow(x/a,2)):"l"===o?Math.max(0,(.5*i-g)/(.5*i)):"c"===o&&g>.5*i?0:1,"avg"===_?O=O*P+.5*(1-P):O*=P;var k={r:l.r*O+c.r*(1-O),g:l.g*O+c.g*(1-O),b:l.b*O+c.b*(1-O)},j=4*d+y*i*4;h.data[j]=k.r,h.data[j+1]=k.g,h.data[j+2]=k.b,h.data[j+3]=255}p.putImageData(h,0,0);var S=new n.Sprite(n.Texture.fromCanvas(f));S.x=e-i/2,S.y=t-i/2,this._container.addChild(S)}},{key:"height",value:function height(){return this._heigth}},{key:"image",value:function image(e,t,r,s,o){var i=this.experiment._runner._syntax.remove_quotes(e),a=this.experiment._runner._pool[i];void 0===a&&this.experiment._runner._debugger.addError('"'.concat(e,'" does not exist'));var u=a.data,l=document.createElement("canvas");l.width=u.width,l.height=u.height,l.getContext("2d").drawImage(u,0,0);var c=new n.Sprite(n.Texture.fromCanvas(l));c.scale.x=o,c.scale.y=o,-1!==[1,"1",!0,"yes"].indexOf(t)?(c.x=r-c.width/2,c.y=s-c.height/2):(c.x=r,c.y=s),this._container.addChild(c)}},{key:"init_display",value:function init_display(e){this._height=e.vars.height,this._width=e.vars.width,e._runner._renderer.resize(this._width,this._height),e._runner._renderer.clear(this._styles._convertColorValue(e.vars.background,"number")),e._runner._renderer.backgroundColor=this._styles._convertColorValue(e.vars.background,"number"),e._runner._renderer.view.style.cursor="none",e._runner._screen._fullScreenInit(),e._runner._renderer.view.focus()}},{key:"line",value:function line(e,t,r,s,o){var i=this._getStyle(o),line=new n.Graphics;line.lineStyle(i.penwidth,i.color,1),line.moveTo(0,0),line.lineTo(r-e,s-t),line.x=e,line.y=t,this._container.addChild(line)}},{key:"noise",value:function noise(e,t,r,s,o,i,a,u){r=this._match_env(r);var l=document.createElement("canvas");l.width=s,l.height=s;var c=l.getContext("2d"),_=c.getImageData(0,0,s,s);i=this._styles._convertColorValueToRGB(i),a=this._styles._convertColorValueToRGB(a);for(var f=0;f<s;f++)for(var p=0;p<s;p++){var h=f-.5*s,d=p-.5*s,y=Math.sqrt(Math.pow(h,2)+Math.pow(d,2)),m=void 0,v=Math.random();m="g"===r?Math.exp(-.5*Math.pow(h/o,2)-.5*Math.pow(d/o,2)):"l"===r?Math.max(0,(.5*s-y)/(.5*s)):"c"===r&&y>.5*s?0:1,"avg"===u?v=v*m+.5*(1-m):v*=m;var b={r:i.r*v+a.r*(1-v),g:i.g*v+a.g*(1-v),b:i.b*v+a.b*(1-v)},g=4*f+p*s*4;_.data[g]=b.r,_.data[g+1]=b.g,_.data[g+2]=b.b,_.data[g+3]=255}c.putImageData(_,0,0);var w=new n.Sprite(n.Texture.fromCanvas(l));w.x=e-s/2,w.y=t-s/2,this._container.addChild(w)}},{key:"polygon",value:function polygon(e,t){for(var r=this._getStyle(t),s=[],o=0;o<e.length;o++)s.push(e[o][0]),s.push(e[o][1]);s.push(e[0][0]),s.push(e[0][1]);var polygon=new n.Graphics;polygon.lineStyle(r.penwidth,r.color,1),!0===r.fill&&polygon.beginFill(r.background_color),polygon.drawPolygon(s),!0===r.fill&&polygon.endFill(),this._container.addChild(polygon)}},{key:"prepare",value:function prepare(){}},{key:"rect",value:function rect(e,t,r,s,o){var i=this._getStyle(o),a=new n.Graphics;a.lineStyle(i.penwidth,i.color,1),!0===i.fill?(a.beginFill(i.background_color),a.drawRect(0,0,r,s),a.endFill()):a.drawRect(0,0,r,s),a.x=e,a.y=t,this._container.addChild(a)}},{key:"size",value:function size(){var size={width:this._width,height:this._height};return size}},{key:"show",value:function show(e){return e=void 0!==e?e:this.experiment,this.experiment._currentCanvas=this,this._container.scale.x=this.experiment._scale_x,this._container.scale.y=this.experiment._scale_y,this.experiment._runner._renderer.backgroundColor=this._styles._background_color,this.experiment._runner._renderer.render(this._container),null!=e?e.clock.time():null}},{key:"text",value:function text(e,t,r,s,o,i){var a=this._getStyle(i);if("yes"===o&&this._containsHTML(e)){var u={element_style:a,height:0,row:{ascent:0,height:0,text_elements:[],text_dimensions:[],text_underline:[],width:0},rows:[],styles:[],width:0,x_pos:4,y_pos:0},l=document.createElement("div");document.body.appendChild(l),l.style.fontFamily=a.font_family,l.style.fontSize=String(a.font_size)+"px",l.style.fontWeight=!0===a.font_bold?"bold":"normal",l.style.lineHeight="normal",l.style.display="inline-block",l.style.visibility="hidden",l.innerHTML=e,this._parseHtmlNode(l,u,a),document.body.removeChild(l),0!==u.row.text_elements.length&&(u.height=u.height+u.row.height,u.rows.push(u.row)),u.y_pos=0;for(var c=0;c<u.rows.length;c++){for(var _=0;_<u.rows[c].text_elements.length;_++){var f=u.rows[c].ascent-u.rows[c].text_dimensions[_].ascent;u.rows[c].text_elements[_].y=u.y_pos+f,-1!==[1,"1",!0,"yes"].indexOf(t)?(u.rows[c].text_elements[_].x=u.rows[c].text_elements[_].x+r-u.rows[c].width/2,u.rows[c].text_elements[_].y=u.rows[c].text_elements[_].y+s-u.height/2):(u.rows[c].text_elements[_].x=u.rows[c].text_elements[_].x+r,u.rows[c].text_elements[_].y=u.rows[c].text_elements[_].y+s+6),!0===u.rows[c].text_underline[_]&&this.line(u.rows[c].text_elements[_].x,u.rows[c].text_elements[_].y+u.rows[c].text_dimensions[_].ascent+7,u.rows[c].text_elements[_].x+u.rows[c].text_elements[_].width,u.rows[c].text_elements[_].y+u.rows[c].text_dimensions[_].ascent+7,a),this._container.addChild(u.rows[c].text_elements[_])}u.y_pos=u.y_pos+u.rows[c].height}}else{var p={fontFamily:a.font_family,fontSize:a.font_size,fontWeight:!0===a.font_bold?"bold":"normal",fill:a.color},h=new n.Text(e,p);-1!==[1,"1",!0,"yes"].indexOf(t)?(h.x=r-h.width/2,h.y=s-h.height/2):(h.x=r,h.y=s),this._container.addChild(h)}}}]),Canvas}();t.default=o},"./src/js/osweb/backends/clock.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Clock(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Clock),this._experiment=e,this._startTime=-1}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Clock,[{key:"_initialize",value:function _initialize(){this._startTime=this._now()}},{key:"_now",value:function _now(){return window.performance.now?Math.round(window.performance.now()):window.performance.webkitNow?Math.round(window.performance.webkitNow()):(new Date).getTime()}},{key:"sleep",value:function sleep(e){null!==this._experiment&&this._experiment._runner._events._run(e,n.constants.RESPONSE_DURATION,null)}},{key:"time",value:function time(){return-1!==this._startTime?this._now()-this._startTime:0}}]),Clock}();t.default=s},"./src/js/osweb/backends/keyboard.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Keyboard(e,t,r){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Keyboard),this._experiment=e,this._keyList=void 0===r?[]:r,this._timeOut=void 0===t?null:t,this._SYNONIEM_MAP=[[" ","space","SPACE"],['"',"quotedbl","QUOTEDBL"],["!","exclaim","EXCLAIM"],["#","hash","HASH"],["$","dollar","DOLLAR"],["&","ampersand","AMPERSAND"],["'","quote","QUOTE"],["(","leftbracket","leftparen","LEFTBRACKET","LEFTPAREN"],[")","rightbracket","rightparen","RIGHTBRACKET","RIGHTPAREN"],["*","asteriks","ASTERISK"],["+","plus","PLUS"],[",","comma","COMMA"],["-","minus","MINUS"],[".","period","PERIOD"],["/","slash","SLASH"],["1"],["2"],["3"],["4"],["5"],["6"],["7"],["8"],["9"],["0"],["=","equals","EQUALS"],[":","colon","COLON"],[";","semicolon","SEMICOLON"],["<","less","LESS"],[">","greater","GREATER"],["?","question","QUESTION"],["@","at","AT"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["kp0","KP0"],["kp1","KP1"],["kp2","KP2"],["kp3","KP3"],["kp4","KP4"],["kp5","KP5"],["kp6","KP6"],["kp7","KP7"],["kp8","KP8"],["kp9","KP9"],["kp_divide","KP_DIVIDE"],["kp_enter","KP_ENTER"],["kp_equals","KP_EQUALS"],["kp_minus","KP_MINUS"],["kp_multiply","KP_MULTIPLY"],["kp_period","KP_PERIOD"],["kp_plus","KP_PLUS"],["\\","backslash","BACKSLASH"],["^","power","caret","POWER","CARET"],["_","underscore","UNDERSCORE"],["`","backquote","BACKQUOTE"],["f1","F1","help","HELP"],["f2","F2"],["f3","F3"],["f4","F4"],["f5","F5"],["f6","F6"],["f7","F7"],["f8","F8"],["f9","F9"],["f10","F10"],["f11","F11"],["f12","F12"],["f13","F13"],["f14","F14"],["f15","F15"],["up","UP"],["down","DOWN"],["left","LEFT"],["right","RIGHT"],["menu","MENU"],["lshift","left shift","LSHIFT","LEFT SHIFT"],["lctrl","left ctrl","LCTRL","LEFT CTRL"],["lalt","left alt","LALT","LEFT ALT"],["rshift","right shift","RSHIFT","RIGHT SHIFT"],["rctrl","right ctrl","RCTRL","RIGHT CTRL"],["ralt","right alt","alt gr","RALT","RIGHT ALT","ALT GR"],["page up","pageup","PAGE UP","PAGEUP"],["page down","pagedown","PAGE DOWN","PAGEDOWN"],["pause","PAUSE"],["scroll lock","scrollock","SCROLL LOCK","SCROLLOCK"],["caps lock","capslock","CAPS LOCK","CAPSLOCK"],["nummlock","NUMMLOCK"],["clear","CLEAR"],["enter","ENTER","return","RETURN"],["tab","TAB"],["backspace","BACKSPACE"],["end","END"],["home","HOME"],["insert","INSERT"],["delete","DELETE"],["sysreq","sys req","SYSREQ","SYS REQ"],["break","BREAK"],["escape","ESCAPE"],["print","PRINT"],["print screen","PRINT SCREEN"],["lmeta","left meta","LMETA","LEFT META","lsuper","LSUPER","left super","LEFT SUPER"],["rmeta","right meta","RMETA","RIGHT META","rsuper","right super","RSUPER","RIGHT SUPER"],["euro","EURO"],["first","FIRST"],["last","LAST"],["kp enter","KP ENTER"],["kp equals","KP EQUALS"],["mode","MODE"],["unknown","UNKNOWN"],["unknown key","UNKNOWN KEY"]]}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Keyboard,[{key:"_get_default_from_synoniem",value:function _get_default_from_synoniem(e){for(var t=[],r=0;r<e.length;r++){var n=this._synonyms(e[r]);t.push(n[0])}return t}},{key:"_set_config",value:function _set_config(e,t){this._keyList=t,this._timeOut=e}},{key:"_synonyms",value:function _synonyms(e){if(void 0===e)return null;for(var t=0;t<this._SYNONIEM_MAP.length;t++)for(var r=0;r<this._SYNONIEM_MAP[t].length;r++)if(this._SYNONIEM_MAP[t][r]===e)return this._SYNONIEM_MAP[t]}},{key:"flush",value:function flush(){return!1}},{key:"get_key",value:function get_key(e,t){this._keyList=void 0===t?this._keyList:t,this._timeOut=void 0===e?this._timeOut:e,null!==this._experiment&&this._experiment._runner._events._run(this._timeOut,n.constants.RESPONSE_KEYBOARD,this._keyList)}},{key:"get_mods",value:function get_mods(){var e=[];return null!==this._experiment._runner._events.keyDownEvent&&(!0===this._experiment._runner._events.keyDownEvent.event.shiftKey&&e.push("shift"),!0===this._experiment._runner._events.keyDownEvent.event.ctrlKey&&e.push("ctrl"),!0===this._experiment._runner._events.keyDownEvent.event.altKey&&e.push("alt")),e}},{key:"show_virtual_keyboard",value:function show_virtual_keyboard(e){if(!0===e)this._experiment._runner._renderer.view.focus();else{var t=document.createElement("input");document.body.appendChild(t),t.focus(),document.body.removeChild(t)}}}]),Keyboard}();t.default=s},"./src/js/osweb/backends/log.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/lodash/lodash.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Log(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Log),this._all_vars=null,this._experiment=e,this._experiment.vars.logfile="",this._header_written=!1,this._log=[]}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Log,[{key:"_get_all_vars",value:function _get_all_vars(){return null===this._all_vars&&(this._all_vars=this._experiment.vars.inspect()),this._all_vars}},{key:"close",value:function close(){this._log.length>0&&(this._experiment._runner._data=this._log.join("")),this._log=[]}},{key:"open",value:function open(){this._header_written=!1,null!==this._log&&this.close()}},{key:"write",value:function write(e,t){!0===(t=void 0===t||t)?this._log.push(e+"\n"):this._log.push(e)}},{key:"write_vars",value:function write_vars(e){var t,r=[];if(null===(e=void 0===e?null:e)&&(e=this._get_all_vars()),e.sort(),!1===this._header_written){for(var s=0;s<e.length;s++)r.push('"'+e[s]+'"');this.write(r.join()),this._header_written=!0}r=[];for(var o={},i=0;i<e.length;i++)t=this._experiment.vars.get(e[i],"NA",!1),r.push('"'+t+'"'),o[e[i]]=t;this.write(r.join()),n.default.isFunction(this._experiment.onLog)&&this._experiment.onLog(o)}}]),Log}();t.default=s},"./src/js/osweb/backends/mouse.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Mouse(e,t,r,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Mouse),this._experiment=e,this._timeOut=void 0===t?null:t,this._buttonList=void 0===r?null:r,this._visible=void 0!==n&&n,this._SYNONIEM_MAP=[["1","left_button"],["2","middle_button"],["3","right_button"],["4","scroll_up"],["5","scroll_down"]]}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Mouse,[{key:"_get_default_from_synoniem",value:function _get_default_from_synoniem(e){for(var t=[],r=0;r<e.length;r++){var n=this._synonyms(e[r]);t.push(n[0])}return t}},{key:"_set_config",value:function _set_config(e,t,r){this._timeOut=e,this._buttonList=t,this._visible=r}},{key:"_synonyms",value:function _synonyms(e){if(void 0===e)return null;for(var t=0;t<this._SYNONIEM_MAP.length;t++)for(var r=0;r<this._SYNONIEM_MAP[t].length;r++)if(this._SYNONIEM_MAP[t][r]===e)return this._SYNONIEM_MAP[t]}},{key:"flush",value:function flush(){return!1}},{key:"get_click",value:function get_click(e,t,r){this._timeOut=void 0===e?this._timeOut:e,this._buttonList=void 0===t?this._buttonList:t,this._visible=void 0===r?this._visible:r,null!==this._experiment&&(this.show_cursor(this._visible),this._experiment._runner._events._run(this._timeOut,n.constants.RESPONSE_MOUSE,this._buttonList))}},{key:"get_pos",value:function get_pos(){return null!==this._experiment._runner._events._mouseMoveEvent?{rtTime:this._experiment._runner._events._mouseMoveEvent.rtTime,x:this._experiment._runner._events._mouseMoveEvent.event.clientX,y:this._experiment._runner._events._mouseMoveEvent.event.clientY}:{rtTime:-1,x:-1,y:-1}}},{key:"get_pressed",value:function get_pressed(){return null!==this._experiment._runner.events._mouse_press?{buttons:[0===this._experiment._runner._events._mouseDownEvent.event.button,1===this._experiment._runner._events._mouseDownEvent.event.button,2===this._experiment._runner._events._mouseDownEvent.event.button]}:{buttons:[null,null,null]}}},{key:"set_pos",value:function set_pos(e){}},{key:"show_cursor",value:function show_cursor(e){this._visible=e,this._experiment._runner._renderer.view.style.cursor=!0===e?"default":"none"}}]),Mouse}();t.default=s},"./src/js/osweb/backends/sampler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js"));r("./node_modules/pixi-sound/dist/pixi-sound.es.js");var s=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function SamplerBackend(e,t,r,s,o,i,a,u){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SamplerBackend),this.block=void 0!==u&&u,this.duration=void 0===i?"sound":i,this.experiment=e,this.fade=void 0===a?0:a,this.pan=void 0===o?0:o,this.pitch=void 0===s?1:s,this.source=void 0===t?null:t,this.volume=void 0===r?1:r,this._instance="",null!==t&&(this._name=t.name,!1===n.sound.exists(t.name)&&n.sound.add(t.name,{url:t.data.src,preload:!0,complete:this.experiment._runner._events._audioEnded.bind(this)}))}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(SamplerBackend,[{key:"play",value:function play(e,t,r,s,o,i){this.block=void 0===i?this.block:i,this.duration=void 0===s?this.duration:s,this.fade=void 0===o?this.fade:o,this.pan=void 0===r?this.pan:r,this.pitch=void 0===t?this.pitch:t,this.volume=void 0===e?this.volume:e,""!==this._name&&(n.sound.volume(this._name,this.volume),n.sound.play(this._name))}},{key:"wait",value:function wait(){this.experiment._runner._events._run(this,-1,s.constants.RESPONSE_SOUND,[])}}]),SamplerBackend}();t.default=o},"./src/js/osweb/backends/styles.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/lodash/isInteger.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Styles(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Styles),this._initConstants(),void 0===e?(this._background_color=0,this._bidi=!1,this._color="white",this._fill=!1,this._font_bold=!1,this._font_family="Arial",this._font_italic=!1,this._font_size=24,this._font_underline=!1,this._html=!1,this._penwidth=1):(this.background_color=e.vars.get("background",0),this.bidi=e.vars.get("bidi","no"),this.color=e.vars.get("foreground","white"),this.fill="yes"===e.vars.get("fill","no"),this.font_bold=e.vars.get("font_bold","no"),this.font_family=e.vars.get("font_family","Arial"),this.font_italic=e.vars.get("font_italic","no"),this.font_size=e.vars.get("font_size",24),this.font_underline=e.vars.get("font_underline","no"),this.html=e.vars.get("html","no"),this.penwidth=e.vars.get("penwidth",1))}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Styles,[{key:"_convertColorValue",value:function _convertColorValue(e){var t=0;if("string"==typeof e){if(!0===/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))t=4===e.length?parseInt("0x"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16):parseInt("0x"+e[1]+e[2]+e[3]+e[4]+e[5]+e[6],16);else if(void 0!==this._DEFAULT_COLOURS[e.toLowerCase()])t=parseInt(this._DEFAULT_COLOURS[e.toLowerCase()],16);else if("rgb"===e.slice(0,3).toLowerCase()){var r=e.split("(")[1].split(")")[0],n=(r=r.split(",")).map(function(e){return/^\d+(\.\d+)?%$/.test(e)?(e=e.slice(0,-1),e=(e=Math.round(parseInt(e)/100*255)).toString(16)):e=parseInt(e).toString(16),1===e.length?"0"+e:e});t=parseInt("0x"+n.join(""))}}else!0===this._isInt(e)&&(t=e<256?65536*e+256*e+e:16843008);return t}},{key:"_convertColorValueToRGB",value:function _convertColorValueToRGB(e){var t=this._convertColorValue(e);return{r:t>>16,g:t>>8&255,b:255&t}}},{key:"_isInt",value:function _isInt(e){return(0,n.default)(e)}},{key:"_checkVal",value:function _checkVal(e){return-1!==[!0,"yes",1,"1"].indexOf(e)}},{key:"_initConstants",value:function _initConstants(){this._DEFAULT_COLOURS={aliceblue:"0xf0f8ff",antiquewhite:"0xfaebd7",aqua:"0x00ffff",aquamarine:"0x7fffd4",azure:"0xf0ffff",beige:"0xf5f5dc",bisque:"0xffe4c4",black:"0x000000",blanchedalmond:"0xffebcd",blue:"0x0000ff",blueviolet:"0x8a2be2",brown:"0xa52a2a",burlywood:"0xdeb887",cadetblue:"0x5f9ea0",chartreuse:"0x7fff00",chocolate:"0xd2691e",coral:"0xff7f50",cornflowerblue:"0x6495ed",cornsilk:"0xfff8dc",crimson:"0xdc143c",cyan:"0x00ffff",darkblue:"0x00008b",darkcyan:"0x008b8b",darkgoldenrod:"0xb8860b",darkgray:"0xa9a9a9",darkgreen:"0x006400",darkgrey:"0xa9a9a9",darkkhaki:"0xbdb76b",darkmagenta:"0x8b008b",darkolivegreen:"0x556b2f",darkorange:"0xff8c00",darkorchid:"0x9932cc",darkred:"0x8b0000",darksalmon:"0xe9967a",darkseagreen:"0x8fbc8f",darkslateblue:"0x483d8b",darkslategray:"0x2f4f4f",darkslategrey:"0x2f4f4f",darkturquoise:"0x00ced1",darkviolet:"0x9400d3",deeppink:"0xff1493",deepskyblue:"0x00bfff",dimgray:"0x696969",dimgrey:"0x696969",dodgerblue:"0x1e90ff",firebrick:"0xb22222",floralwhite:"0xfffaf0",forestgreen:"0x228b22",fuchsia:"0xff00ff",gainsboro:"0xdcdcdc",ghostwhite:"0xf8f8ff",gold:"0xffd700",goldenrod:"0xdaa520",gray:"0x808080",grey:"0x808080",green:"0x008000",greenyellow:"0xadff2f",honeydew:"0xf0fff0",hotpink:"0xff69b4","indianred ":"0xcd5c5c",indigo:"0x4b0082",ivory:"0xfffff0",khaki:"0xf0e68c",lavender:"0xe6e6fa",lavenderblush:"0xfff0f5",lawngreen:"0x7cfc00",lemonchiffon:"0xfffacd",lightblue:"0xadd8e6",lightcoral:"0xf08080",lightcyan:"0xe0ffff",lightgoldenrodyellow:"0xfafad2",lightgray:"0xd3d3d3",lightgrey:"0xd3d3d3",lightgreen:"0x90ee90",lightpink:"0xffb6c1",lightsalmon:"0xffa07a",lightseagreen:"0x20b2aa",lightskyblue:"0x87cefa",lightslategray:"0x778899",lightslategrey:"0x778899",lightsteelblue:"0xb0c4de",lightyellow:"0xffffe0",lime:"0x00ff00",limegreen:"0x32cd32",linen:"0xfaf0e6",magenta:"0xff00ff",maroon:"0x800000",mediumaquamarine:"0x66cdaa",mediumblue:"0x0000cd",mediumorchid:"0xba55d3",mediumpurple:"0x9370d8",mediumseagreen:"0x3cb371",mediumslateblue:"0x7b68ee",mediumspringgreen:"0x00fa9a",mediumturquoise:"0x48d1cc",mediumvioletred:"0xc71585",midnightblue:"0x191970",mintcream:"0xf5fffa",mistyrose:"0xffe4e1",moccasin:"0xffe4b5",navajowhite:"0xffdead",navy:"0x000080",oldlace:"0xfdf5e6",olive:"0x808000",olivedrab:"0x6b8e23",orange:"0xffa500",orangered:"0xff4500",orchid:"0xda70d6",palegoldenrod:"0xeee8aa",palegreen:"0x98fb98",paleturquoise:"0xafeeee",palevioletred:"0xd87093",papayawhip:"0xffefd5",peachpuff:"0xffdab9",peru:"0xcd853f",pink:"0xffc0cb",plum:"0xdda0dd",powderblue:"0xb0e0e6",purple:"0x800080",red:"0xff0000",rosybrown:"0xbc8f8f",royalblue:"0x4169e1",saddlebrown:"0x8b4513",salmon:"0xfa8072",sandybrown:"0xf4a460",seagreen:"0x2e8b57",seashell:"0xfff5ee",sienna:"0xa0522d",silver:"0xc0c0c0",skyblue:"0x87ceeb",slateblue:"0x6a5acd",slategray:"0x708090",slategrey:"0x708090",snow:"0xfffafa",springgreen:"0x00ff7f",steelblue:"0x4682b4",tan:"0xd2b48c",teal:"0x008080",thistle:"0xd8bfd8",tomato:"0xff6347",turquoise:"0x40e0d0",violet:"0xee82ee",wheat:"0xf5deb3",white:"0xffffff",whitesmoke:"0xf5f5f5",yellow:"0xffff00",yellowgreen:"0x9acd32"},this._DEFAULT_FONTS={sans:"Droid Sans",serif:"Droid Serif",mono:"Droid Sans Mono","chinese-japanese-korean":"WenQuanYi Micro Hei",arabic:"Droid Arabic Naskh",hebrew:"Droid Sans Hebrew",hindi:"Lohit Hindi"}}},{key:"background_color",get:function get(){return this._background_color},set:function set(e){this._background_color=this._convertColorValue(e,"number")}},{key:"bidi",get:function get(){return this._bidi},set:function set(e){this._bidi=this._checkVal(e)}},{key:"color",get:function get(){return this._color},set:function set(e){this._color=this._convertColorValue(e,"number")}},{key:"fill",get:function get(){return this._fill},set:function set(e){this._fill=-1!==[1,"1",!0,"yes"].indexOf(e)}},{key:"font_bold",get:function get(){return this._font_bold},set:function set(e){this._font_bold=this._checkVal(e)}},{key:"font_family",get:function get(){return this._font_family},set:function set(e){e in this._DEFAULT_FONTS?this._font_family=this._DEFAULT_FONTS[e]:this._font_family=e}},{key:"font_italic",get:function get(){return this._font_italic},set:function set(e){this._font_italic=this._checkVal(e)}},{key:"font_size",get:function get(){return this._font_size},set:function set(e){this._isInt(e)?this._font_size=e:this._font_size=Number(e.slice(0,-2))}},{key:"font_underline",get:function get(){return this._font_underline},set:function set(e){this._font_underline=this._checkVal(e)}},{key:"html",get:function get(){return this._html},set:function set(e){this._html=this._checkVal(e)}},{key:"penwidth",get:function get(){return this._penwidth},set:function set(e){this._isInt(e)||(this._penwidth=1),this._penwidth=e}}]),Styles}();t.default=s},"./src/js/osweb/backends/video.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),s=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function Video(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Video),this._experiment=e,this.audio=!0,this.duration="keypress",this.full_screen=!1,this._playing=!1,this._script=null,null!==t&&(this._video=t.data,this._texture=new n.Texture.fromVideo(t.data),this._videoSprite=new n.Sprite(this._texture),this._video.pause(),this._video.onended=this._experiment._runner._events._videoEnded.bind(this),this._video.onplay=this._experiment._runner._events._videoPlay.bind(this))}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Video,[{key:"_update",value:function _update(){!0===this._playing&&(this._experiment._runner._renderer.render(this._videoSprite),null!==this._script&&!0===this._event_handler_always&&this._experiment._runner._pythonParser._run(null,this._script))}},{key:"play",value:function play(){this._video.play(),this._video.volume=!0===this.audio?1:0,!0===this.full_screen&&(this._videoSprite.width=this._experiment._runner._renderer.width,this._videoSprite.height=this._experiment._runner._renderer.height),this._experiment._runner._renderer.render(this._videoSprite),this._playing=!0}},{key:"stop",value:function stop(){this._video.pause(),this._playing=!1}},{key:"wait",value:function wait(){this._experiment._runner._events._run(-1,s.constants.RESPONSE_VIDEO,[])}}]),Video}();t.default=o},"./src/js/osweb/classes/file_pool_store.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function FilePoolStore(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FilePoolStore),this._items=[],this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FilePoolStore,[{key:"_clean_up",value:function _clean_up(){this._items=[]}},{key:"add",value:function add(e,t){null!==(t=void 0===t?null:t)&&(e.name=t),this._items.push(e),this[e.name]=e}},{key:"fallback_folder",value:function fallback_folder(){return null}},{key:"files",value:function files(){for(var files=[],e=0;e<this._items.length;e++)files.push(this._items[e]);return files}},{key:"rename",value:function rename(e,t){for(var r=0;r<this._items.length;r++)this._items[r].name===e&&(this[t]=this._items[r],delete this[e],this._items[r].name=t)}},{key:"size",value:function size(){for(var size=0,e=0;e<this._items.length;e++)size+=this._items[e].size;return size}}]),FilePoolStore}();t.default=n},"./src/js/osweb/classes/item_stack.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function ItemStack(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ItemStack),this._items=[],this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ItemStack,[{key:"clear",value:function clear(){this._items=[]}},{key:"push",value:function push(e,t){var r={item:e,phase:t};this._items.push(r)}},{key:"pop",value:function pop(){return this._items.pop()}}]),ItemStack}();t.default=n},"./src/js/osweb/classes/item_store.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function ItemStore(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ItemStore),this._items={},this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ItemStore,[{key:"_clean_up",value:function _clean_up(){this._items={}}},{key:"_isClass",value:function _isClass(e){return e in n.itemClasses}},{key:"_newElementClass",value:function _newElementClass(e,t,r){return new n.itemClasses[e](t,r)}},{key:"_newItemClass",value:function _newItemClass(e,t,r,s){var o=new n.itemClasses[e](t,r,s);return o.type=e,o}},{key:"_newWidgetClass",value:function _newWidgetClass(e,t,r){return new n.itemClasses[e+"_widget"](t,r)}},{key:"execute",value:function execute(e,t){this.prepare(e,t),this._runner._itemStack.pop(),this.run(e,t)}},{key:"items",value:function items(){var items=[];for(var e in this._items)items.push([e,this._items[e]]);return items}},{key:"keys",value:function keys(){var keys=[];for(var e in this._items)keys.push(e);return keys}},{key:"newItem",value:function newItem(e,t,r){if(!0===this._isClass(e))return this._items[t]=this._newItemClass(e,this._runner._experiment,t,r),this._items[t];this._runner._debugger.addError("Unknown class definition within osweb script: "+e)}},{key:"prepare",value:function prepare(e,t){this._runner._itemStack.push(e,"prepare"),this._items[e]._parent=t,this._items[e].prepare()}},{key:"run",value:function run(e,t){this._runner._events._currentItem=this._items[e],this._runner._events._currentItem._parent=t,this._runner._itemStack.push(e,"run"),this._items[e].run()}},{key:"valid_name",value:function valid_name(e,t){for(var r,n=1,s=r=null===(t=void 0===t?null:t)?"new_"+e:this._runner._experiment.syntax.sanitize(t,!0,!1);!0===this._items.hasOwnProperty(s);)s=r+"_"+String(n),n++;return s}},{key:"values",value:function values(){var values=[];for(var e in this._items)values.push(this._items[e]);return values}}]),ItemStore}();t.default=s},"./src/js/osweb/classes/python_workspace.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=__webpack_require__("./node_modules/lodash/lodash.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var PythonWorkspace=function(){function PythonWorkspace(e){_classCallCheck(this,PythonWorkspace),this._runner=e}return _createClass(PythonWorkspace,[{key:"_eval",value:function _eval(bytecode){if((0,_lodash.isBoolean)(bytecode))return bytecode;if("string"==typeof bytecode){bytecode=this._runner._syntax.eval_text(bytecode,null,!0);var evalString=this._runner._syntax.remove_quotes(bytecode);return"always"===evalString||"never"!==evalString&&eval(evalString)}return this._runner._pythonParser._run_statement(bytecode)}}]),PythonWorkspace}();exports.default=PythonWorkspace},"./src/js/osweb/classes/syntax.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./node_modules/lodash/lodash.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Syntax(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Syntax),this._runner=e,this.isNumber=n.isNumber}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Syntax,[{key:"compile_cond",value:function compile_cond(e,t){var r=this;return t=void 0===t||t,"always"===e.toLowerCase()||"never"!==e.toLowerCase()&&(e="="===e[0]?e.substr(1):(e=(e=this.remove_quotes(e)).replace(/(?!(?:and|or|not)\b)(?:".*?"|'.*?'|\[(?:\w+?|=.+)\]|\b\w+\b)/g,function(e,t,n){if("["===n[t]&&"]"===n[t+e.length-1]){if("\\"===n[t-1]&&"\\"!==n[t-2])return'"'.concat(e,'"');if("="===e[1]){var s=e.substring(2,e.length-1),o=r._runner._pythonParser._parse(s);return r._runner._pythonParser._run_statement(o)}var i=e.substring(1,e.length-1);return"var.".concat(i)}return['"',"'"].includes(n[t])&&n[t]===n[t+e.length-1]?e:Number.isNaN(Number(e))?'"'.concat(e,'"'):Number(e)})).replace(/([^!<>=\-+*])(=)([^=])/g,"$1==$3"),!0===t?this._runner._pythonParser._parse(e):e)}},{key:"convert_if_numeric",value:function convert_if_numeric(e){var t=Number(e);return Number.isNaN(t)?e:t}},{key:"count_quotes",value:function count_quotes(e){for(var t=0,r=!1,n=0;n<e.length;n++)"\\"===e[n]&&!r||r?r=!r:'"'!==e[n]||r||(t+=1);return t}},{key:"eval_text",value:function eval_text(e,t,r){var s=this;if((0,n.isObject)(e))return this._runner._pythonParser._run_statement(e);if((0,n.isNumber)(e))return e;var o=(e=this.escapeBrackets(e)).replace(/\[(\w+|=.+?)\]/g,function(e,o,i,a){if("="===(o=s.unescapeBrackets(o))[0]){var u=s._runner._pythonParser._parse(o.substring(1,o.length));return s._runner._pythonParser._run_statement(u)}var l;try{l=null===t||void 0===t[o]?s._runner._experiment.vars[o]:t[o],l=s.eval_text(l,t,r)}catch(e){throw s._runner._debugger.addError("Could not find variable '".concat(o,"': ").concat(e.message)),e}return!0===r&&(0,n.isString)(l)?'"'.concat(l,'"'):l});return this.strip_slashes(this.unescapeBrackets(o))}},{key:"safe_wrap",value:function safe_wrap(e){return(0,n.isNumber)(e)?e=Number(e):/[^a-z0-9_]/i.test(e)&&(e='"'+this.add_slashes(e)+'"'),e}},{key:"add_slashes",value:function add_slashes(e){return e.replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')}},{key:"strip_slashes",value:function strip_slashes(e){return e.replace(/\\(?=['"])/gm,"").replace(/\\\\/gm,"\\")}},{key:"parse_cmd",value:function parse_cmd(e){this.count_quotes(e)%2!=0&&this._runner._debugger.addError("Invalid script definition, parsing error:  '"+e+"'");for(var t=this.split(e),r=t.shift(),n=[],s={},o=0;o<t.length;o++){var i=t[o].split(/(?:("[^"\\]*(?:\\.[^"\\]*)*"))|(?:(\w+)=(?:(?:(-?\d*\.{0,1}\d+)|(\w+))|("[^"\\]*(?:\\.[^"\\]*)*")))/gm).filter(Boolean);i.length<2?n.push(this.convert_if_numeric(this.sanitize(i[0]))):s[i[0]]=this.convert_if_numeric(this.sanitize(i[1]))}return[r,n,s]}},{key:"create_cmd",value:function create_cmd(e,t,r){var n=e;if(void 0!==t&&t instanceof Array&&t.length>0)for(var s=0;s<t.length;s++)n+=" "+this.safe_wrap(t[s]);if(void 0!==r&&t instanceof Object)for(var o in r)n+=" "+o+"="+this.safe_wrap(r[o]);return n}},{key:"remove_quotes",value:function remove_quotes(e){return'""'===e?"":'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,e.length-1):"'"===e[0]&&"'"===e[e.length-1]?e.slice(1,e.length-1):e}},{key:"sanitize",value:function sanitize(e,t,r){return e=e.replace(/^"(.+(?="$))"$/,"$1"),this.strip_slashes(e)}},{key:"split",value:function split(e){var t=e.match(/(?:[^\s"]+|"[^"]*")+/g);return null!==t?t:[]}},{key:"escapeBrackets",value:function escapeBrackets(e){return e.replace(/\\+[[\]]/g,function(e,t,r,n){var s=e.length-1;if(s%2==1){var o="["===e[e.length-1]?"OPEN":"CLOSE";return"%%".concat(o,":").concat(s,":%%")}return e})}},{key:"unescapeBrackets",value:function unescapeBrackets(e){return e.replace(/%%(OPEN|CLOSE):\d+:%%/g,function(e,t,r,n){var s="OPEN"===e.substr(2,4)?"[":"]",o=e.indexOf(":")+1,i=e.lastIndexOf(":"),a=parseInt(e.substr(o,i-o));return Array(a).join("\\")+s})}}]),Syntax}();t.default=s},"./src/js/osweb/classes/var_store.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function VarStore(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,VarStore),this._item=e,this._parent=t}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(VarStore,[{key:"get",value:function get(e,t,r,n){t=void 0===t?null:t,r=void 0===r||r,n=void 0===n?null:n;var s=null;return e in this&&(s="string"==typeof this[e]?this._item.syntax.eval_text(this[e],null,!0):this[e]),null==s&&this._parent&&e in this._parent&&(s="string"==typeof this._parent[e]?this._item.syntax.eval_text(this._parent[e],null,!0):this._parent[e]),s}},{key:"has",value:function has(e){return this.hasOwnProperty(e)}},{key:"inspect",value:function inspect(){var e=[];for(var t in this)e.push(t);return e=e.slice(2,-7)}},{key:"items",value:function items(){}},{key:"set",value:function set(e,t){this[e]=t}},{key:"unset",value:function unset(e){!0===this.has(e)&&delete this[e]}},{key:"vars",value:function vars(){}}]),VarStore}();t.default=n},"./src/js/osweb/elements/arrow.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Arrow(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Arrow);var r={arrow_body_length:.8,arrow_body_width:.5,arrow_head_width:30,fill:1};return r.color=e.vars.get("foreground"),r.penwidth=1,r.x1=null,r.y1=null,r.x2=null,r.y2=null,_possibleConstructorReturn(this,_getPrototypeOf(Arrow).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Arrow,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Arrow,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Arrow.prototype),"draw",this).call(this);var e=new s.default;e.background_color=this._properties.color,e.color=this._properties.color,e.fill=this._properties.fill,e.penwidth=this._properties.penwidth,this.sketchpad.canvas.arrow(this._properties.x1,this._properties.y1,this._properties.x2,this._properties.y2,this._properties.arrow_body_width,this._properties.arrow_body_length,this._properties.arrow_head_width,e)}}]),Arrow}();t.default=o},"./src/js/osweb/elements/base_element.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function BaseElement(e,t,r){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseElement),this.canvas=e.canvas,this.defaults=r,this.defaults.show_if="always",this.defaults.z_index=0,this.experiment=e.experiment,this.fix_coordinates="yes"===e.vars.uniform_coordinates,this.name=e.name,this.only_keywords=!1,this.pool=e.experiment.pool,this.properties={},this.sketchpad=e,this.syntax=e.syntax,this.vars=e.vars,this._properties=null,this.from_string(t)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(BaseElement,[{key:"from_string",value:function from_string(e){this.properties=this.sketchpad.syntax.parse_cmd(e)[2]}},{key:"z_index",value:function z_index(){return this.properties.z_index}},{key:"eval_properties",value:function eval_properties(){this._properties={};var e=this.experiment.vars.width/2,t=this.experiment.vars.height/2;for(var r in this.properties){var n=this.sketchpad.syntax.eval_text(this.properties[r],null,!1);"x"!==r&&"x1"!==r&&"x2"!==r||(n=Math.round(Number(n)+e)),"y"!==r&&"y1"!==r&&"y2"!==r||(n=Math.round(Number(n)+t)),this._properties[r]=n}}},{key:"is_shown",value:function is_shown(){return this.experiment.python_workspace.self=this.sketchpad,this.experiment.python_workspace._eval(this.experiment.syntax.compile_cond(this.properties.show_if))}},{key:"draw",value:function draw(){this.eval_properties()}}]),BaseElement}();t.default=n},"./src/js/osweb/elements/circle.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Circle(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Circle);var r={};return r.color=e.vars.get("foreground"),r.fill=0,r.penwidth=1,r.x=null,r.y=null,r.r=null,_possibleConstructorReturn(this,_getPrototypeOf(Circle).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Circle,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Circle,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Circle.prototype),"draw",this).call(this);var e=new s.default;e.background_color=this._properties.color,e.color=this._properties.color,e.fill=this._properties.fill,e.penwidth=this._properties.penwidth,this.sketchpad.canvas.circle(this._properties.x,this._properties.y,this._properties.r,e)}}]),Circle}();t.default=o},"./src/js/osweb/elements/ellipse.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Ellipse(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ellipse);var r={fill:1};return r.color=e.vars.get("foreground"),r.penwidth=1,r.x=null,r.y=null,r.w=null,r.h=null,_possibleConstructorReturn(this,_getPrototypeOf(Ellipse).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Ellipse,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Ellipse,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Ellipse.prototype),"draw",this).call(this);var e=new s.default;e.background_color=this._properties.color,e.color=this._properties.color,e.fill=this._properties.fill,e.penwidth=this._properties.penwidth,this.sketchpad.canvas.ellipse(Number(this._properties.x),Number(this._properties.y),Number(this._properties.w),Number(this._properties.h),e)}}]),Ellipse}();t.default=o},"./src/js/osweb/elements/fixdot.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Fixdot(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fixdot);var r={};return r.color=e.vars.get("foreground"),r.style="default",r.x=null,r.y=null,_possibleConstructorReturn(this,_getPrototypeOf(Fixdot).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Fixdot,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Fixdot,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Fixdot.prototype),"draw",this).call(this);var e=new s.default(this.sketchpad);e.color=this._properties.color,this.sketchpad.canvas.fixdot(this._properties.x,this._properties.y,this._properties.style,e)}}]),Fixdot}();t.default=o},"./src/js/osweb/elements/gabor.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/elements/base_element.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function Gabor(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Gabor);var r={bgmode:"avg",color1:"white",color2:"black",env:"gaussian",freq:1,orient:0,phase:0,size:96,stdev:12,x:null,y:null};return _possibleConstructorReturn(this,_getPrototypeOf(Gabor).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Gabor,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Gabor,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Gabor.prototype),"draw",this).call(this),this.sketchpad.canvas.gabor(this._properties.x,this._properties.y,this._properties.orient,this._properties.freq,this._properties.env,this._properties.size,this._properties.stdev,this._properties.phase,this._properties.color1,this._properties.color2,this._properties.bgmode)}}]),Gabor}();t.default=s},"./src/js/osweb/elements/image.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/elements/base_element.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function ImageElement(e,t){var r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ImageElement);var n={center:1,file:null,scale:1,x:null,y:null};return(r=_possibleConstructorReturn(this,_getPrototypeOf(ImageElement).call(this,e,t,n)))._file=null,r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ImageElement,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ImageElement,[{key:"draw",value:function draw(){_get(_getPrototypeOf(ImageElement.prototype),"draw",this).call(this),this.sketchpad.canvas.image(this._properties.file,this._properties.center,this._properties.x,this._properties.y,this._properties.scale)}}]),ImageElement}();t.default=s},"./src/js/osweb/elements/line.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Line(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Line);var r={};return r.color=e.vars.get("foreground"),r.penwidth=1,r.x1=null,r.y1=null,r.x2=null,r.y2=null,_possibleConstructorReturn(this,_getPrototypeOf(Line).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Line,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Line,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Line.prototype),"draw",this).call(this);var e=new s.default;e.color=this._properties.color,e.penwidth=this._properties.penwidth,this.sketchpad.canvas.line(this._properties.x1,this._properties.y1,this._properties.x2,this._properties.y2,e)}}]),Line}();t.default=o},"./src/js/osweb/elements/noise.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/elements/base_element.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function Noise(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Noise);var r={color1:"white",color2:"black",env:"gaussian",size:96,stdev:12,x:null,y:null,bgmode:"avg"};return _possibleConstructorReturn(this,_getPrototypeOf(Noise).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Noise,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Noise,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Noise.prototype),"draw",this).call(this),this.sketchpad.canvas.noise(this._properties.x,this._properties.y,this._properties.env,this._properties.size,this._properties.stdev,this._properties.color1,this._properties.color2,this._properties.bgmode)}}]),Noise}();t.default=s},"./src/js/osweb/elements/rect.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Rect(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Rect);var r={fill:1};return r.color=e.vars.get("foreground"),r.penwidth=1,r.x=null,r.y=null,r.w=null,r.h=null,_possibleConstructorReturn(this,_getPrototypeOf(Rect).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Rect,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Rect,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Rect.prototype),"draw",this).call(this);var e=new s.default;e.fill=this._properties.fill,e.color=this._properties.color,e.background_color=this._properties.color,e.penwidth=this._properties.penwidth,this.sketchpad.canvas.rect(this._properties.x,this._properties.y,this._properties.w,this._properties.h,e)}}]),Rect}();t.default=o},"./src/js/osweb/elements/textline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/elements/base_element.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/styles.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Textline(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Textline);var r={center:1};return r.color=e.vars.get("foreground"),r.font_family=e.vars.get("font_family"),r.font_size=e.vars.get("font_size"),r.font_bold=e.vars.get("font_bold"),r.font_italic=e.vars.get("font_italic"),r.html="yes",r.text=null,r.x=null,r.y=null,_possibleConstructorReturn(this,_getPrototypeOf(Textline).call(this,e,t,r))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Textline,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Textline,[{key:"draw",value:function draw(){_get(_getPrototypeOf(Textline.prototype),"draw",this).call(this);var e=decodeURIComponent(escape(this._properties.text)),t=new s.default;t.color=this._properties.color,t.font_family=this._properties.font_family,t.font_size=this._properties.font_size,t.font_italic="yes"===this._properties.font_italic,t.font_bold="yes"===this._properties.font_bold,t.font_underline="yes"===this._properties.font_underline,this.sketchpad.canvas.text(e,this._properties.center,this._properties.x,this._properties.y,this._properties.html,t)}}]),Textline}();t.default=o},"./src/js/osweb/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VERSION_NUMBER=t.VERSION_NAME=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/system/runner.js"));t.VERSION_NAME="OSWeb (ES2016)";t.VERSION_NUMBER="1.0.2",String.prototype.replaceAll=function(e,t,r){return this.replace(new RegExp(e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),r?"gi":"g"),"string"==typeof t?t.replace(/\$/g,"$$$$"):t)},String.prototype._pySlice=function(e,t,r){return null!==t?this.slice(e,t):this.slice(e)};var s={printVersionInfo:function printVersionInfo(){console.log("OSWeb (ES2016) - 1.0.2")},getRunner:function getRunner(e){return new n.default(e)}};t.default=s},"./src/js/osweb/items/experiment.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/item.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/canvas.js")),o=_interopRequireDefault(r("./src/js/osweb/backends/log.js")),i=r("./src/js/osweb/system/constants.js"),a=r("./src/js/osweb/index.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=[],n=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}return r}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){function Experiment(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Experiment),(n=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Experiment).call(this,e,t,r)))._canvas=new s.default(_assertThisInitialized(_assertThisInitialized(n))),n._currentCanvas=n._canvas,n._log=new o.default(_assertThisInitialized(_assertThisInitialized(n))),n._scale_x=1,n._scale_y=1,n.debug=n._runner._debugger.enabled,n.items=n._runner._itemStore,n.pool=n._runner._pool,n.vars.start="experiment",n.vars.title="My Experiment",n.vars.bidi="no",n.vars.round_decimals=2,n.vars.form_clicks="no",n.vars.uniform_coordinates="no",n.vars.sessionid=(new Date).valueOf()+Math.floor(1e5*Math.random()),n.vars.sound_freq=48e3,n.vars.sound_sample_size=-16,n.vars.sound_channels=2,n.vars.sound_buf_size=1024,n.vars.canvas_backend="xpyriment",n.vars.width=1024,n.vars.height=768,n.vars.background=0,n.vars.foreground=16777215,n.vars.font_size=18,n.vars.font_family="mono",n.vars.font_italic="no",n.vars.font_bold="no",n.vars.font_underline="no",n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Experiment,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Experiment,[{key:"reset_feedback",value:function reset_feedback(){this.vars.total_responses=0,this.vars.total_correct=0,this.vars.total_response_time=0,this.vars.avg_rt="undefined",this.vars.average_response_time="undefined",this.vars.accuracy="undefined",this.vars.acc="undefined"}},{key:"set_subject",value:function set_subject(e){this.vars.subject_nr=e,this.vars.subject_parity=e%2==0?"even":"odd"}},{key:"read_definition",value:function read_definition(e){for(var t=e.shift(),r="";null!==t&&t.length>0&&"\t"===t.charAt(0);)r=r+t.substring(1)+"\n",t=e.shift();return r}},{key:"from_string",value:function from_string(e){if(null!==e){this._source=e.split("\n");for(var t=this._source.shift();null!=t;){try{var r,n,s=_slicedToArray(this._runner._syntax.parse_cmd(t),3);r=s[0],n=s[1],s[2]}catch(e){this._runner._debugger.addError("Failed to parse script. Maybe it contains illegal characters or unclosed quotes: "+e.message)}if(null!==r&&n.length>0&&!1===this.parse_variable(t)&&"define"===r)if(2===n.length){var o=n[0],i=this._runner._syntax.sanitize(n[1]),a=this.read_definition(this._source);this._runner._itemStore.newItem(o,i,a)}else this._runner._debugger.addError("Failed to parse definition: "+t);t=this._source.shift()}}}},{key:"init_clock",value:function init_clock(){this.clock._initialize()}},{key:"init_display",value:function init_display(){this._canvas.init_display(this)}},{key:"init_log",value:function init_log(){this._log.open()}},{key:"onLog",value:function onLog(e){}},{key:"run",value:function run(){switch(_get(_getPrototypeOf(Experiment.prototype),"run",this).call(this),this._status){case i.constants.STATUS_INITIALIZE:this._status=i.constants.STATUS_FINALIZE,this.vars.datetime=(new Date).toString(),this.vars.opensesame_version=a.VERSION_NUMBER,this.vars.opensesame_codename=a.VERSION_NAME,this.init_clock(),this.init_display(),this.init_log(),this.reset_feedback(),this._runner._debugger.addMessage("experiment.run(): experiment started at "+(new Date).toUTCString()),null!==this._runner._itemStore._items[this.vars.start]?(this._runner._itemStack.clear(),this._runner._itemStore.prepare(this.vars.start,this)):this._runner._debugger.addError("Could not find the item that is the entry point of the experiment: "+this.vars.start);break;case i.constants.STATUS_FINALIZE:this._runner._debugger.addMessage("experiment.run(): experiment finished at "+(new Date).toUTCString()),this.end()}}},{key:"end",value:function end(){this._log.close(),this._runner._finalize()}}]),Experiment}();t.default=u},"./src/js/osweb/items/feedback.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/sketchpad.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function Feedback(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Feedback),(n=_possibleConstructorReturn(this,_getPrototypeOf(Feedback).call(this,e,t,r))).description="Provides feedback to the participant",n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Feedback,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Feedback,[{key:"_complete",value:function _complete(){_get(_getPrototypeOf(Feedback.prototype),"_complete",this).call(this),"yes"===this.vars.reset_variables&&this.experiment.reset_feedback()}},{key:"reset",value:function reset(){_get(_getPrototypeOf(Feedback.prototype),"reset",this).call(this),this.vars.reset_variables="yes"}},{key:"prepare",value:function prepare(){this._parent._prepare_complete()}},{key:"run",value:function run(){_get(_getPrototypeOf(Feedback.prototype),"prepare",this).call(this),_get(_getPrototypeOf(Feedback.prototype),"run",this).call(this)}}]),Feedback}();t.default=s},"./src/js/osweb/items/generic_response.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/item.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/keyboard.js")),o=_interopRequireDefault(r("./src/js/osweb/backends/mouse.js")),i=r("./src/js/osweb/system/constants.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function GenericResponse(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GenericResponse),(n=_possibleConstructorReturn(this,_getPrototypeOf(GenericResponse).call(this,e,t,r)))._allowed_responses=null,n._duration=0,n._duration_func=null,n._keyboard=null,n._mouse=null,n._responsetype=i.constants.RESPONSE_NONE,n._timeout=-1,n.auto_response="a",n.process_feedback=!1,n.synonyms=null,n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(GenericResponse,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(GenericResponse,[{key:"_complete",value:function _complete(){void 0!==this.vars.timeout&&this.experiment._runner._events._timeStamp-this.experiment.vars.get("time_"+this.name)>this.vars.timeout&&this.process_response_timeout(),_get(_getPrototypeOf(GenericResponse.prototype),"_complete",this).call(this)}},{key:"_update",value:function _update(e){null!==e&&(this._responsetype===i.constants.RESPONSE_KEYBOARD&&e.type===i.constants.RESPONSE_KEYBOARD?this.process_response_keypress(e):this._responsetype===i.constants.RESPONSE_MOUSE&&e.type===i.constants.RESPONSE_MOUSE&&this.process_response_mouseclick(e))}},{key:"auto_responser",value:function auto_responser(){}},{key:"auto_responser_mouse",value:function auto_responser_mouse(){}},{key:"prepare_allowed_responses",value:function prepare_allowed_responses(){if(null===this.vars.get("allowed_responses"))this._allowed_responses=null;else{var e=String(this.vars.allowed_responses).split(";");"keypress"===this.vars.duration?this._allowed_responses=this._keyboard._get_default_from_synoniem(e):"mouseclick"===this.vars.duration&&(this._allowed_responses=this._mouse._get_default_from_synoniem(e)),0===this._allowed_responses.length&&this.experiment._runner._debugger.addError("Defined responses are not valid in keyboard_response: "+this.name+" ("+this.vars.get("allowed_responses")+")")}}},{key:"prepare_duration",value:function prepare_duration(){this._duration=this.syntax.remove_quotes(this.vars.get("duration")),null!==this._duration&&("keypress"===this._duration||"mouseclick"===this._duration||"sound"===this._duration||"video"===this._duration?(this._duration=-1,"keypress"===this.vars.duration?(this.prepare_duration_keypress(),this._responsetype=i.constants.RESPONSE_KEYBOARD):"mouseclick"===this.vars.duration?(this.prepare_duration_mouseclick(),this._responsetype=i.constants.RESPONSE_MOUSE):"sound"===this.vars.duration?this._responsetype=i.constants.RESPONSE_SOUND:"video"===this.vars.duration&&(this._responsetype=i.constants.RESPONSE_VIDEO)):(this._duration=Number(this._duration),0===this._duration?this._responsetype=i.constants.RESPONSE_NONE:this._responsetype=i.constants.RESPONSE_DURATION))}},{key:"prepare_duration_keypress",value:function prepare_duration_keypress(){if(this._keyboard=new s.default(this.experiment),!0===this.experiment.auto_response)this._duration_func=this.auto_responder;else{var e=-1!==this._timeout?this._timeout:this._duration;this._keyboard._set_config(e,this._allowed_responses)}}},{key:"prepare_duration_mouseclick",value:function prepare_duration_mouseclick(e){if(this._mouse=new o.default(this.experiment),!0===this.experiment.auto_response)this._duration_func=this.auto_responder_mouse;else{var t=-1!==this._timeout?this._timeout:this._duration;this._mouse._set_config(t,this._allowed_responses,!1)}}},{key:"prepare_timeout",value:function prepare_timeout(){null!==this.vars.get("timeout")&&("number"==typeof this.vars.timeout?this._timeout=this.vars.timeout:this._timeout=-1)}},{key:"process_response",value:function process_response(){switch(this._responsetype){case i.constants.RESPONSE_NONE:this._status=i.constants.STATUS_FINALIZE,this._complete();break;case i.constants.RESPONSE_DURATION:this.sleep_for_duration();break;case i.constants.RESPONSE_KEYBOARD:this._keyboard.get_key();break;case i.constants.RESPONSE_MOUSE:this._mouse.get_click();break;case i.constants.RESPONSE_SOUND:this._sampler.wait();break;case i.constants.RESPONSE_VIDEO:this._video_player.wait()}}},{key:"process_response_keypress",value:function process_response_keypress(e){this.experiment._start_response_interval=this.sri,this.experiment._end_response_interval=e.rtTime,this.experiment.vars.response=this.syntax.sanitize(e.resp),this.synonyms=this._keyboard._synonyms(this.experiment.vars.response),this.response_bookkeeping()}},{key:"process_response_mouseclick",value:function process_response_mouseclick(e){this.experiment._start_response_interval=this.sri,this.experiment._end_response_interval=e.rtTime,this.experiment.vars.response=e.resp,this.synonyms=this._mouse._synonyms(this.experiment.vars.response),this.experiment.vars.cursor_x=e.event.clientX,this.experiment.vars.cursor_y=e.event.clientY,this.response_bookkeeping()}},{key:"process_response_timeout",value:function process_response_timeout(){this.experiment._start_response_interval=this.sri,this.experiment._end_response_interval=this.experiment._runner._events._timeStamp,this.experiment.vars.response="None",this.synonyms=["None","none"],this.response_bookkeeping()}},{key:"response_bookkeeping",value:function response_bookkeeping(){this.experiment.vars.set("response_time",this.experiment._end_response_interval-this.experiment._start_response_interval),this.experiment.vars.set("response_"+this.name,this.experiment.vars.get("response")),this.experiment.vars.set("response_time_"+this.name,this.experiment.vars.get("response_time")),this.experiment._start_response_interval=null,!0===this.process_feedback&&(null!==this.vars.get("correct_response")&&null!==this.synonyms?this.synonyms.includes(this.syntax.remove_quotes(this.vars.get("correct_response")))?(this.experiment.vars.correct=1,this.experiment.vars.total_correct=this.experiment.vars.total_correct+1):this.experiment.vars.correct=0:this.experiment.vars.correct="undefined",this.experiment.vars.total_response_time=this.experiment.vars.total_response_time+this.experiment.vars.response_time,this.experiment.vars.total_responses=this.experiment.vars.total_responses+1,this.experiment.vars.accuracy=Math.round(100*this.experiment.vars.total_correct/this.experiment.vars.total_responses),this.experiment.vars.acc=this.experiment.vars.accuracy,this.experiment.vars.average_response_time=Math.round(this.experiment.vars.total_response_time/this.experiment.vars.total_responses),this.experiment.vars.avg_rt=this.experiment.vars.average_response_time,this.experiment.vars.set("correct_"+this.name,this.vars.correct))}},{key:"set_sri",value:function set_sri(e){!0===e&&(this.sri=self.vars.get("time_"+this.name),this.experiment._start_response_interval=this.vars.get("time_"+this.name)),this.experiment._start_response_interval?this.sri=this.experiment._start_response_interval:this.sri=this.experiment.vars.get("time_"+this.name)}},{key:"sleep_for_duration",value:function sleep_for_duration(){this.sleep(this._duration)}},{key:"prepare",value:function prepare(){this.prepare_timeout(),this.prepare_allowed_responses(),this.prepare_duration(),_get(_getPrototypeOf(GenericResponse.prototype),"prepare",this).call(this)}}]),GenericResponse}();t.default=a},"./src/js/osweb/items/inline_script.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function InlineScript(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,InlineScript),(n=_possibleConstructorReturn(this,_getPrototypeOf(InlineScript).call(this,e,t,r))).description="Executes Python code",n._prepare_run=!1,n._prepare_tree=null,n._run_tree=null,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(InlineScript,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(InlineScript,[{key:"_complete",value:function _complete(){1===this.experiment._runner._pythonParser._status?this.experiment._runner._pythonParser._process_nodes():!0===this._prepare_run?_get(_getPrototypeOf(InlineScript.prototype),"prepare",this).call(this):_get(_getPrototypeOf(InlineScript.prototype),"_complete",this).call(this)}},{key:"_complete_script",value:function _complete_script(){this._complete()}},{key:"reset",value:function reset(){this.vars._prepare="",this.vars._run=""}},{key:"from_string",value:function from_string(e){if(this.reset(),null!==e)for(var t=!1,r=!1,n=e.split("\n"),s=0;s<n.length;s++){var o=this.syntax.split(n[s]);if(null!==o&&o.length>0)switch(o[0]){case"set":this.parse_variable(n[s]);break;case"__end__":t=!1,r=!1;break;case"___prepare__":r=!0;break;case"___run__":t=!0;break;default:!0===t?this.vars._run=this.vars._run+n[s]+"\n":!0===r&&(this.vars._prepare=this.vars._prepare+n[s]+"\n")}else!0===t?this.vars._run=this.vars._run+n[s]+"\n":!0===r&&(this.vars._prepare=this.vars._prepare+n[s]+"\n")}}},{key:"prepare",value:function prepare(){this._prepare_tree=this.experiment._runner._pythonParser._parse(this.vars._prepare),this._run_tree=this.experiment._runner._pythonParser._parse(this.vars._run),null!==this._prepare_tree?(this.experiment._runner._events._currentItem=this,this._prepare_run=!0,this.set_item_onset(),this.experiment._runner._pythonParser._run(this,this._prepare_tree)):_get(_getPrototypeOf(InlineScript.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(InlineScript.prototype),"run",this).call(this),this._prepare_run=!1,this.set_item_onset(),null!==this._run_tree?this.experiment._runner._pythonParser._run(this,this._run_tree):(this.experiment._runner._pythonParser._status=0,this._complete())}}]),InlineScript}();t.default=s},"./src/js/osweb/items/item.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js"),s=_interopRequireDefault(r("./src/js/osweb/classes/var_store.js")),o=_interopRequireDefault(r("./src/js/osweb/backends/clock.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=[],n=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}return r}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function Item(e,t,r){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Item),this._parent=null,this._runner="Runner"===e.constructor.name?e:e._runner,this._status=n.constants.STATUS_NONE,this.clock="Runner"===e.constructor.name?new o.default(this):e.clock,this.count=0,this.experiment="Runner"===e.constructor.name?this:e,this.name=t,this.python_workspace=this._runner._pythonWorkspace,this.response_store=this._runner._responseStore,this.syntax=this._runner._syntax,this.vars=new s.default(this,"Runner"===e.constructor.name?null:this.experiment.vars)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Item,[{key:"_complete",value:function _complete(){this._status=n.constants.STATUS_FINALIZE,null!==this._parent&&(this._runner._events._currentItem=this._parent,this._runner._events._currentItem.run())}},{key:"_prepare_complete",value:function _prepare_complete(){}},{key:"_update",value:function _update(e){}},{key:"sleep",value:function sleep(e){this.clock.sleep(e)}},{key:"time",value:function time(){return this.clock.time()}},{key:"parse_comment",value:function parse_comment(e){return(e=e.trim()).length>0&&"#"===e.charAt(0)?(this.comments.push(e.slice(1)),!0):e.length>1&&"/"===e.charAt(0)&&(this.comments.push(e.slice(2)),!0)}},{key:"parse_keyword",value:function parse_keyword(e,t,r){}},{key:"parse_line",value:function parse_line(e){}},{key:"parse_variable",value:function parse_variable(e){if(this.parse_comment(e))return!0;var t,r,n=_slicedToArray(this._runner._syntax.parse_cmd(e),3);return t=n[0],r=n[1],n[2],"set"===t&&(2===r.length?(this.vars.set(r[0],r[1]),!0):void this._runner._debugger.addError("Failed to parse definition: "+e))}},{key:"from_string",value:function from_string(e){if(this.variables={},this.comments=[],this.reset(),null!==e)for(var t=e.split("\n"),r=0;r<t.length;r++)""!==t[r]&&!1===this.parse_variable(t[r])&&this.parse_line(t[r])}},{key:"reset",value:function reset(){}},{key:"prepare",value:function prepare(){this.experiment.vars.set("count_"+this.name,this.count),this.count++,this._status=n.constants.STATUS_INITIALIZE,this._runner._debugger.addMessage("prepare "+this.name),"sequence"===this.type&&"sequence"===this._parent.type||null!==this._parent&&"feedback"!==this.type&&this._parent._prepare_complete()}},{key:"set_item_onset",value:function set_item_onset(e){e=void 0===e?this.clock.time():e,this.experiment.vars.set("time_"+this.name,e)}},{key:"run",value:function run(){this._runner._debugger.addMessage("run "+this.name)}}]),Item}();t.default=i},"./src/js/osweb/items/keyboard_response.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/generic_response.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/keyboard.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function KeyboardResponse(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,KeyboardResponse),(n=_possibleConstructorReturn(this,_getPrototypeOf(KeyboardResponse).call(this,e,t,r))).description="Collects keyboard responses",n._flush="yes",n._keyboard=new s.default(n.experiment),n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(KeyboardResponse,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(KeyboardResponse,[{key:"reset",value:function reset(){this.auto_response="space",this.process_feedback=!0,this.vars.allowed_responses=null,this.vars.correct_response=null,this.vars.duration="keypress",this.vars.flush="yes",this.vars.timeout="infinite"}},{key:"prepare",value:function prepare(){this._flush=this.vars.flush?this.vars.flush:"yes",_get(_getPrototypeOf(KeyboardResponse.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(KeyboardResponse.prototype),"run",this).call(this),this.set_item_onset(),"yes"===this._flush&&this._keyboard.flush(),this.set_sri(),this.process_response()}}]),KeyboardResponse}();t.default=o},"./src/js/osweb/items/logger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js")),s=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Logger(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Logger),(n=_possibleConstructorReturn(this,_getPrototypeOf(Logger).call(this,e,t,r))).description="Logs experimental data",n.logvars=[],n._logvars=null,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Logger,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Logger,[{key:"_complete",value:function _complete(){_get(_getPrototypeOf(Logger.prototype),"_complete",this).call(this)}},{key:"reset",value:function reset(){this._logvars=null,this.logvars=[],this.vars.auto_log="yes"}},{key:"from_string",value:function from_string(e){if(this.variables={},this.comments=[],this.reset(),null!==e)for(var t=e.split("\n"),r=0;r<t.length;r++)if(""!==t[r]&&!1===this.parse_variable(t[r])){var n=this.syntax.split(t[r]);"log"===n[0]&&n.length>0&&this.logvars.push(n[1])}}},{key:"run",value:function run(){if(_get(_getPrototypeOf(Logger.prototype),"run",this).call(this),this._status!==s.constants.STATUS_FINALIZE){if(this._status=s.constants.STATUS_FINALIZE,this.set_item_onset(),null==this._logvars)if("yes"===this.vars.auto_log)this._logvars=this.experiment._log._get_all_vars();else{this._logvars=[];var e=!0,t=!1,r=void 0;try{for(var n,o=this.logvars[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i in this._logvars==!1&&this._logvars.push(i)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}this._logvars.sort()}this.experiment._log.write_vars(this._logvars),this._complete()}}}]),Logger}();t.default=o},"./src/js/osweb/items/loop.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./node_modules/lodash/lodash.js"),s=_interopRequireDefault(r("./src/js/osweb/items/item.js")),o=_interopRequireDefault(r("./src/js/osweb/backends/keyboard.js")),i=r("./src/js/osweb/system/constants.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function Loop(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Loop),(n=_possibleConstructorReturn(this,_getPrototypeOf(Loop).call(this,e,t,r))).description="Repeatedly runs another item",n.matrix=null,n._break_if="",n._cycles=[],n._index=-1,n._keyboard=null,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Loop,s.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Loop,[{key:"_complete",value:function _complete(){1===this.experiment.vars.repeat_cycle?(this.experiment._runner._debugger.msg("Repeating cycle: "+this._index),this._cycles.push(this._index),"random"===this.vars.order&&this.shuffle(this._cycles)):(this._status=i.constants.STATUS_FINALIZE,_get(_getPrototypeOf(Loop.prototype),"_complete",this).call(this))}},{key:"reset",value:function reset(){this.matrix={},this.vars.cycles=1,this.vars.repeat=1,this.vars.skip=0,this.vars.offset="no",this.vars.order="random",this.vars.item="",this.vars.break_if="never"}},{key:"from_string",value:function from_string(e){if(this.comments=[],this.variables={},this.reset(),null!=e)for(var t=e.split("\n"),r=0;r<t.length;r++)if(""!==t[r]&&!1===this.parse_variable(t[r])){var s=this.syntax.split(t[r]);if("run"===s[0]&&s.length>1)this.vars.item=s[1];else if("setcycle"===s[0]&&s.length>3){var o=s[1],i=s[2],a=this.syntax.remove_quotes(s[3]);"="===(a=(0,n.isNumber)(a)?Number(a):a)[0]&&null!==(a=this.experiment._runner._pythonParser._prepare(a.slice(1)))&&(a=a.body[0]),void 0===this.matrix[o]&&(this.matrix[o]={}),this.matrix[o][i]=a}}}},{key:"shuffle",value:function shuffle(e){var t,r,n;for(t=1;t<e.length;t++)(r=Math.floor(Math.random()*(1+t)))!==t&&(n=e[t],e[t]=e[r],e[r]=n)}},{key:"apply_cycle",value:function apply_cycle(e){if(e in this.matrix)for(var t in this.matrix[e]){var r=this.matrix[e][t];if("object"===_typeof(r))try{r=this.experiment._runner._pythonParser._runstatement(r)}catch(e){this.experiment._runner._debugger.addError("Failed to evaluate experssion in in loop item: "+this.name+" ("+r+")")}this.experiment.vars.set(t,r)}}},{key:"prepare",value:function prepare(){""!==this.vars.break_if&&"never"!==this.vars.break_if?this._break_if=this.syntax.compile_cond(this.vars.break_if):this._break_if=null,this._cycles=[],this._index=0;for(var e=Math.floor(this.vars.repeat),t=0;t<e;t++)for(var r=0;r<this.vars.cycles;r++)this._cycles.push(r);var n=this.vars.repeat-e;if(n>0)for(var s=Array.apply(null,{length:this.vars.cycles}).map(Number.call,Number),i=Math.floor(this.vars.cycles*n),a=0;a<i;a++){var u=Math.floor(Math.random()*s.length);this._cycles.push(u),s.splice(u,1)}if("random"===this.vars.order)this.shuffle(this._cycles);else if(this._cycles.length<this.vars.skip)this.experiment._runner._debugger.addError("The value of skip is too high in loop item. You cannot skip more cycles than there are in: "+this.name);else if("yes"===this.vars.offset){var l=this._cycles.slice(0,this.vars.skip);this._cycles=this._cycles.slice(this.vars.skip),this._cycles=this._cycles.concat(l)}else this._cycles=this._cycles.slice(this.vars.skip);this._keyboard=new o.default(this.experiment),"undefined"===this.experiment.items._items[this.vars.item]&&this.experiment._runner._debugger.addError("Could not find an item which is called by loop item: "+this.name+" ("+this.vars.item+")"),_get(_getPrototypeOf(Loop.prototype),"prepare",this).call(this),this.set_item_onset()}},{key:"run",value:function run(){if(_get(_getPrototypeOf(Loop.prototype),"run",this).call(this),this._cycles.length>0){var e=!1;if(this._index=this._cycles.shift(),this.apply_cycle(this._index),null!==this._break_if){this.python_workspace.this=this;var t=this.syntax.eval_text(this._break_if,null,!0);!0===this.python_workspace._eval(t)&&(e=!0)}!1===e?(this.experiment.vars.repeat_cycle=0,"sequence"===this._runner._itemStore._items[this.vars.item].type?this.experiment._runner._itemStore.prepare(this.vars.item,this):this.experiment._runner._itemStore.execute(this.vars.item,this)):this._complete()}else this._complete()}}]),Loop}();t.default=a},"./src/js/osweb/items/mouse_response.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/generic_response.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/mouse.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function MouseResponse(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MouseResponse),(n=_possibleConstructorReturn(this,_getPrototypeOf(MouseResponse).call(this,e,t,r))).description="Collects mouse responses",n.resp_codes={},n._flush="yes",n._mouse=new s.default(n.experiment),n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MouseResponse,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(MouseResponse,[{key:"_complete",value:function _complete(){this._mouse.show_cursor(!1),_get(_getPrototypeOf(MouseResponse.prototype),"_complete",this).call(this)}},{key:"reset",value:function reset(){this.auto_response=1,this.process_feedback=!0,this.resp_codes={},this.resp_codes[0]="timeout",this.resp_codes[1]="left_button",this.resp_codes[2]="middle_button",this.resp_codes[3]="right_button",this.resp_codes[4]="scroll_up",this.resp_codes[5]="scroll_down",this.vars.allowed_responses=null,this.vars.correct_response=null,this.vars.duration="mouseclick",this.vars.flush="yes",this.vars.show_cursor="yes",this.vars.timeout="infinite"}},{key:"prepare",value:function prepare(){this._flush=this.vars.flush?this.vars.flush:"yes",_get(_getPrototypeOf(MouseResponse.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(MouseResponse.prototype),"run",this).call(this),this.set_item_onset(),"yes"===this.vars.show_cursor&&this._mouse.show_cursor(!0),"yes"===this._flush&&this._mouse.flush(),this.set_sri(),this.process_response()}}]),MouseResponse}();t.default=o},"./src/js/osweb/items/sampler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/generic_response.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/sampler.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Sampler(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sampler),(n=_possibleConstructorReturn(this,_getPrototypeOf(Sampler).call(this,e,t,r))).block=!1,n.description="Plays a sound file in .wav or .ogg format",n._sample=null,n._sampler=null,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Sampler,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Sampler,[{key:"reset",value:function reset(){this.block=!1,this.vars.sample="",this.vars.pan=0,this.vars.pitch=1,this.vars.fade_in=0,this.vars.stop_after=0,this.vars.volume=1,this.vars.duration="sound"}},{key:"prepare",value:function prepare(){""!==this.vars.sample?(this._sample=this._runner._pool[this.syntax.eval_text(this.vars.sample,this.vars,!1)],this._sampler=new s.default(this.experiment,this._sample),this._sampler.volume=this.vars.volume,this._sampler.duration=this.vars.duration,this._sampler.fade=this.vars.fade,this._sampler.pan=this.vars.pan,this._sampler.pitch=this.vars.pitch):this._debugger.addError("No sample has been specified in sampler: "+this.vars.sample),_get(_getPrototypeOf(Sampler.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){this.set_item_onset(),this.set_sri(),this._sampler.play(),this.process_response()}}]),Sampler}();t.default=o},"./src/js/osweb/items/sequence.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/item.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/keyboard.js")),o=r("./src/js/osweb/system/constants.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function Sequence(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sequence),(n=_possibleConstructorReturn(this,_getPrototypeOf(Sequence).call(this,e,t,r)))._index=-1,n._items=null,n._keyboard=null,n.description="Runs a number of items in sequence",n.flush_keyboard="yes",n.items=null,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Sequence,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Sequence,[{key:"_complete",value:function _complete(){this._status=o.constants.STATUS_FINALIZE,_get(_getPrototypeOf(Sequence.prototype),"_complete",this).call(this)}},{key:"_prepare_complete",value:function _prepare_complete(){this._index<this.items.length?this.items[this._index].item in this._runner._itemStore._items==!1?this._runner._debugger.addError("Could not find a child item which is called by sequence item: "+this.name+" ("+this.items[this._index].item.name+")"):(this._index++,this._items.push({item:this.items[this._index-1].item,cond:this.syntax.compile_cond(this.items[this._index-1].cond)}),this._runner._itemStore.prepare(this.items[this._index-1].item,this)):(this._index=0,this._runner._itemStack.pop(),"sequence"===this._parent.type?this._parent._prepare_complete():this._runner._itemStore.run(this.name,this._parent))}},{key:"reset",value:function reset(){this.items=[],this.vars.flush_keyboard="yes"}},{key:"from_string",value:function from_string(e){if(this.variables={},this.comments=[],this.reset(),null!==e)for(var t=e.split("\n"),r=0;r<t.length;r++)if(""!==t[r]&&!1===this.parse_variable(t[r])){var n=this.syntax.split(t[r]);if(n.length>0&&"run"===n[0]){var s=n[1],o="always";n.length>2&&(o=n[2]),this.items.push({item:s,cond:o})}}}},{key:"prepare",value:function prepare(){_get(_getPrototypeOf(Sequence.prototype),"prepare",this).call(this),"yes"===this.vars.flush_keyboard?this._keyboard=new s.default(this.experiment):this._keyboard=null,this._index=0,this._items=[],this._prepare_complete()}},{key:"run",value:function run(){if(_get(_getPrototypeOf(Sequence.prototype),"run",this).call(this),this._index<this._items.length){0===this._index&&"yes"===this.vars.flush_keyboard&&this._keyboard.flush(),this._index++;var e=this._items[this._index-1];this._runner._pythonWorkspace.self=this,!0===this._runner._pythonWorkspace._eval(e.cond)?this._runner._itemStore.run(e.item,this):this.run()}else this._complete()}}]),Sequence}();t.default=i},"./src/js/osweb/items/sketchpad.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/generic_response.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/canvas.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Sketchpad(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sketchpad),(n=_possibleConstructorReturn(this,_getPrototypeOf(Sketchpad).call(this,e,t,r))).canvas=new s.default(e,!1),n.elements=[],n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Sketchpad,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Sketchpad,[{key:"_compare",value:function _compare(e,t){return e.z_index()<t.z_index()?1:e.z_index()>t.z_index()?-1:0}},{key:"_complete",value:function _complete(){_get(_getPrototypeOf(Sketchpad.prototype),"_complete",this).call(this)}},{key:"reset",value:function reset(){this.elements=[],this.vars.duration="keypress"}},{key:"from_string",value:function from_string(e){if(this.variables={},this.comments=[],this.reset(),null!==e){for(var t=e.split("\n"),r=0;r<t.length;r++)if(""!==t[r]&&!1===this.parse_variable(t[r])){var n=this.syntax.split(t[r]);if(n.length>0&&"draw"===n[0])if(!0===this.experiment.items._isClass(n[1])){var s=this.experiment.items._newElementClass(n[1],this,t[r]);this.elements.push(s)}else this.experiment._runner._debugger.addError("Failed to parse definition: "+n[1])}this.elements.sort(this._compare)}}},{key:"prepare",value:function prepare(){this.canvas.clear();for(var e=0;e<this.elements.length;e++)!0===this.elements[e].is_shown()&&this.elements[e].draw();_get(_getPrototypeOf(Sketchpad.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(Sketchpad.prototype),"run",this).call(this);var e=this.vars.get("background");e&&(this.canvas._styles.background_color=e),this.set_item_onset(this.canvas.show()),this.set_sri(!1),this.process_response()}}]),Sketchpad}();t.default=o},"./src/js/osweb/items/synth.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/sampler.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function Synth(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Synth),(n=_possibleConstructorReturn(this,_getPrototypeOf(Synth).call(this,e,t,r))).description="A basic sound synthesizer",n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Synth,n.default),Synth}();t.default=s},"./src/js/osweb/plugins/advanced_delay.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js")),s=r("./node_modules/lodash/lodash.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function AdvancedDelay(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AdvancedDelay),(n=_possibleConstructorReturn(this,_getPrototypeOf(AdvancedDelay).call(this,e,t,r))).description="Waits for a specified duration",n._duration=-1,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AdvancedDelay,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(AdvancedDelay,[{key:"_random_gauss",value:function _random_gauss(e,t){var r,n=!1;return function(){var s;if(n)s=r,n=!1;else{var o,i,a;do{a=(o=2*Math.random()-1)*o+(i=2*Math.random()-1)*i}while(a>=1);s=o*(a=Math.sqrt(-2*Math.log(a)/a)),r=i*a,n=!0}var u=e+t*s;return u>0?u:-u}}},{key:"reset",value:function reset(){this.vars.duration=1e3,this.vars.jitter=0,this.vars.jitter_mode="Uniform"}},{key:"prepare",value:function prepare(){this._duration=this.vars.duration,(!(0,s.isNumber)(this.vars.duration)||this.vars.duration<0)&&this._runner._debugger.addError("Duration should be a positive numeric value in advanced_delay "+this.name),"Uniform"===this.vars.jitter_mode?this._duration=Math.random(this.vars.duration-this.vars.jitter/2,this.vars.duration+this.vars.jitter/2):"Std. Dev."===this.vars.jitter_mode?this._duration=this._random_gauss(this.vars.duration,this.vars.jitter):this._runner._debugger.addError("Unknown jitter mode in advanced_delay "+this.name),this._duration<0&&(this._duration=0),this._duration=Number(this._duration),this.experiment.vars.set("delay_"+this.name,this._duration),this._runner._debugger.addMessage("delay for "+this._duration+" ms."),_get(_getPrototypeOf(AdvancedDelay.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(AdvancedDelay.prototype),"run",this).call(this),this.set_item_onset(this.time()),this.sleep(this._duration)}}]),AdvancedDelay}();t.default=o},"./src/js/osweb/plugins/form_base.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/item.js")),s=_interopRequireDefault(r("./src/js/osweb/widgets/form.js")),o=r("./src/js/osweb/system/constants.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function FormBase(e,t,r,n,s){var o;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormBase),(o=_possibleConstructorReturn(this,_getPrototypeOf(FormBase).call(this,e,t,r))).cols=[],o.description="A generic form plug-in",o.focus_widget=null,o.form=null,o.options=[],o.rows=[],o.timeout=null,o._form_options=!1,o._form_text=!1,o.description=s,o.item_type=n,o.from_string(r),o}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FormBase,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormBase,[{key:"_complete",value:function _complete(){this.experiment._runner._renderer.view.style.cursor="none",this.experiment._runner._events._state=o.constants.TIMER_NONE,this._status=o.constants.STATUS_FINALIZE,_get(_getPrototypeOf(FormBase.prototype),"_complete",this).call(this)}},{key:"_update",value:function _update(e){this.form._canvas.show(this.form.experiment)}},{key:"reset",value:function reset(){this.vars.cols="2;2",this.vars.rows="2;2",this.vars.spacing=10,this.vars._theme="gray",this.vars.only_render="no",this.vars.timeout="infinite",this.vars.margins="50;50;50;50",this._widgets=[]}},{key:"parse_line",value:function parse_line(e){var t=this.syntax.split(e);!0===this._form_text&&"__end__"!==t[0]&&(this.vars.form_text=this.vars.form_text+e.replace("\t","")+" <br/> "),!0===this._form_options&&"__end__"!==t[0]&&this.options.push(e.replace("\t","")),"widget"===t[0]?(t.shift(),this._widgets.push(t)):"__options__"===t[0]?this._form_options=!0:"__form_text__"===t[0]?(this.vars.form_text="",this._form_text=!0):"__end__"===t[0]&&(this._form_options=!1,this._form_text=!1)}},{key:"prepare",value:function prepare(){var e,t="string"==typeof this.vars.cols?this.vars.cols.split(";"):[String(this.vars.cols)],r="string"==typeof this.vars.rows?this.vars.rows.split(";"):[String(this.vars.rows)],n=this.vars.margins.split(";");e="infinite"===this.vars.timeout?null:this.vars.timeout,this.form=new s.default(this.experiment,t,r,this.vars.spacing,n,this.vars._theme,this,e,"yes"===this.vars.form_clicks);for(var o=0;o<this._widgets.length;o++){this.focus_widget=null;var i={},a=[];if(a.push(this.form),this._widgets[o].length>5)for(var u=5;u<this._widgets[o].length;u++){var l=String(this._widgets[o][u]).substr(0,String(this._widgets[o][u]).indexOf("=")),c=String(this._widgets[o][u]).substring(String(this._widgets[o][u]).indexOf("=")+1,String(this._widgets[o][u]).length);i[l]=this.syntax.remove_quotes(c),i[l]=this.syntax.eval_text(i[l],this.form.item.vars,!0),i[l]=this.syntax.remove_quotes(i[l]),a.push(this.syntax.remove_quotes(c))}var _=!1;void 0!==i.focus&&"yes"===i.focus&&(delete i.focus,_=!0);var f=this._widgets[o][4],p=this._widgets[o][0],h=this._widgets[o][1],d=this._widgets[o][2],y=this._widgets[o][3];try{var m=this.experiment.items._newWidgetClass(f,this.form,i)}catch(e){this.experiment._runner._debugger.addError("Failed to create widget "+f+", error:"+e)}this.form.set_widget(m,[p,h],d,y),!0===_&&(null!=this.focus_widget?this.experiment._runner._debugger.addError("Osweb error: You can only specify one focus widget"):this.focus_widget=m)}_get(_getPrototypeOf(FormBase.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(FormBase.prototype),"run",this).call(this),"yes"===this.vars.only_render?(this.form.render(),this._complete()):this.form._exec(this.focus_widget)}}]),FormBase}();t.default=i},"./src/js/osweb/plugins/form_consent.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/plugins/form_base.js")),s=_interopRequireDefault(r("./src/js/osweb/widgets/form.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function FormConsent(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormConsent),(n=_possibleConstructorReturn(this,_getPrototypeOf(FormConsent).call(this,e,t,r,"form_consent","A simple consent form"))).decline_form=null,n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FormConsent,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormConsent,[{key:"_complete",value:function _complete(){if(null!==this.decline_form)this.decline_form._canvas._container.visible=!1,this.form._canvas._container.visible=!0,this.decline_form=null,this.run();else if(!0===this.experiment.vars.get("accept_status"))if(this.experiment.syntax.remove_quotes(this.experiment.vars.get("checkbox_status"))===this.vars.get("checkbox_text"))_get(_getPrototypeOf(FormConsent.prototype),"_complete",this).call(this);else{console.log("decline form"),this.decline_form=new s.default(this.experiment,[1],[1],10,["50","50","50","50"],"gray",this,5e3,!1);var e=this.experiment.items._newWidgetClass("label",this.decline_form,{text:this.vars.decline_message,center:"yes"});this.decline_form.set_widget(e,[0,0],1,1),this.form._canvas._container.visible=!1,this.decline_form._canvas._container.visible=!0,this.decline_form._exec(null)}else this.experiment._runner.exit()}},{key:"run",value:function run(){_get(_getPrototypeOf(FormConsent.prototype),"run",this).call(this)}}]),FormConsent}();t.default=o},"./src/js/osweb/plugins/form_multiple_choice.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/plugins/form_base.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function FormMultipleChoice(e,t,r){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormMultipleChoice),_possibleConstructorReturn(this,_getPrototypeOf(FormMultipleChoice).call(this,e,t,r,"form_multiple_choice","A simple multiple choise item"))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FormMultipleChoice,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormMultipleChoice,[{key:"_complete",value:function _complete(){_get(_getPrototypeOf(FormMultipleChoice.prototype),"_complete",this).call(this)}},{key:"prepare",value:function prepare(){this.vars.cols="1;1;",this.vars.rows="1;1;",this._widgets=[],this._widgets.push(this.syntax.split('0 0 2 1 label text="[form_title]"')),this._widgets.push(this.syntax.split('0 1 2 1 label center=no text="[question]"'));for(var e=0;e<this.options.length;e++)this._widgets.push(this.syntax.split("0 "+String(e+2)+' 2 1 checkbox group=group1 center=no text="'+this.options[e]+'"')),this.vars.rows=this.vars.rows+"1;";this._widgets.push(this.syntax.split("0 "+String(e+3)+' 2 2 button text="[button_text]"')),this.vars.rows=this.vars.rows+"1;1;",_get(_getPrototypeOf(FormMultipleChoice.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(FormMultipleChoice.prototype),"run",this).call(this)}}]),FormMultipleChoice}();t.default=s},"./src/js/osweb/plugins/form_text_display.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/plugins/form_base.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function FormTextDisplay(e,t,r){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormTextDisplay),_possibleConstructorReturn(this,_getPrototypeOf(FormTextDisplay).call(this,e,t,r,"form_text_display","A simple text display form"))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FormTextDisplay,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormTextDisplay,[{key:"_complete",value:function _complete(){_get(_getPrototypeOf(FormTextDisplay.prototype),"_complete",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(FormTextDisplay.prototype),"run",this).call(this)}}]),FormTextDisplay}();t.default=s},"./src/js/osweb/plugins/form_text_input.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/plugins/form_base.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function FormTextInput(e,t,r){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormTextInput),_possibleConstructorReturn(this,_getPrototypeOf(FormTextInput).call(this,e,t,r,"form_text_input","A simple text input form"))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FormTextInput,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormTextInput,[{key:"_complete",value:function _complete(){_get(_getPrototypeOf(FormTextInput.prototype),"_complete",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(FormTextInput.prototype),"run",this).call(this)}}]),FormTextInput}();t.default=s},"./src/js/osweb/plugins/media_player.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/item.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/video.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function MediaPlayer(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MediaPlayer),(n=_possibleConstructorReturn(this,_getPrototypeOf(MediaPlayer).call(this,e,t,r))).description="A video player",n._script_executed=!1,n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MediaPlayer,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(MediaPlayer,[{key:"_complete",value:function _complete(){!1===this._script_executed?(this._video_player.stop(),null!==this._video_player._script&&"on keypress"===this.vars.get("event_handler_trigger")?(this._script_executed=!0,this._runner._pythonParser._run(this,this._video_player._script)):_get(_getPrototypeOf(MediaPlayer.prototype),"_complete",this).call(this)):_get(_getPrototypeOf(MediaPlayer.prototype),"_complete",this).call(this)}},{key:"_update",value:function _update(e){this._video_player._update()}},{key:"prepare",value:function prepare(){this._video=this.experiment.pool[this.vars.get("video_src")],this._video_player=new s.default(this.experiment,this._video),""!==this.vars.event_handler&&(this._video_player._script=this._runner._pythonParser._parse(this.vars.event_handler)),this._video_player._event_handler_always="after every frame"===this.vars.event_handler_trigger,this._video_player.audio="yes"===this.vars.get("playaudio"),this._video_player.full_screen="yes"===this.vars.get("resizeVideo"),"sound"===this.vars.duration&&(this.vars.duration="video"),this._video_player.duration=this.vars.duration,_get(_getPrototypeOf(MediaPlayer.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){this.set_item_onset(),this.set_sri(),this._video_player.play(),this.process_response()}}]),MediaPlayer}();t.default=o},"./src/js/osweb/plugins/notepad.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js")),s=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function Notepad(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Notepad),(n=_possibleConstructorReturn(this,_getPrototypeOf(Notepad).call(this,e,t,r))).description="A simple notepad to document your experiment. This plug-in does nothing.",n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Notepad,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Notepad,[{key:"_complete",value:function _complete(){this._status=s.constants.STATUS_FINALIZE,_get(_getPrototypeOf(Notepad.prototype),"_complete",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(Notepad.prototype),"run",this).call(this),this._complete()}}]),Notepad}();t.default=o},"./src/js/osweb/plugins/repeat_cycle.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js")),s=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function RepeatCycle(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RepeatCycle),(n=_possibleConstructorReturn(this,_getPrototypeOf(RepeatCycle).call(this,e,t,r))).description="Optionally repeat a cycle from a loop",n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RepeatCycle,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(RepeatCycle,[{key:"_complete",value:function _complete(){this._status=s.constants.STATUS_FINALIZE,_get(_getPrototypeOf(RepeatCycle.prototype),"_complete",this).call(this)}},{key:"prepare",value:function prepare(){this._condition=this.syntax.compile_cond(this.vars.get("condition")),_get(_getPrototypeOf(RepeatCycle.prototype),"prepare",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(RepeatCycle.prototype),"run",this).call(this),this._status!==s.constants.STATUS_FINALIZE&&(!0===this.epxeriment._runner._pythonWorkspace._eval(this._condition)&&(this.experiment.vars.repeat_cycle=1),this._complete())}}]),RepeatCycle}();t.default=o},"./src/js/osweb/plugins/reset_feedback.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/item.js")),s=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function ResetFeedback(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResetFeedback),(n=_possibleConstructorReturn(this,_getPrototypeOf(ResetFeedback).call(this,e,t,r))).description='Resets the feedback variables, such as "avg_rt" and "acc"',n.from_string(r),n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ResetFeedback,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ResetFeedback,[{key:"_complete",value:function _complete(){this._status=s.constants.STATUS_FINALIZE,_get(_getPrototypeOf(ResetFeedback.prototype),"_complete",this).call(this)}},{key:"run",value:function run(){_get(_getPrototypeOf(ResetFeedback.prototype),"run",this).call(this),this._status!==s.constants.STATUS_FINALIZE&&(this.experiment.reset_feedback(),this._complete())}}]),ResetFeedback}();t.default=o},"./src/js/osweb/plugins/touch_response.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/items/mouse_response.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function TouchResponse(e,t,r){var n;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TouchResponse),(n=_possibleConstructorReturn(this,_getPrototypeOf(TouchResponse).call(this,e,t,r))).description="A grid-based response item, convenient for touch screens",n}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TouchResponse,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(TouchResponse,[{key:"reset",value:function reset(){_get(_getPrototypeOf(TouchResponse.prototype),"reset",this).call(this),this.vars.set("allowed_responses",null),this.vars._ncol=2,this.vars._nrow=1}},{key:"prepare",value:function prepare(){this.experiment.vars.correct=-1,_get(_getPrototypeOf(TouchResponse.prototype),"prepare",this).call(this)}},{key:"process_response_mouseclick",value:function process_response_mouseclick(e){this.experiment._start_response_interval=this.sri,this.experiment._end_response_interval=e.rtTime,this.experiment.vars.response=e.resp,this.synonyms=this._mouse._synonyms(this.experiment.vars.response),this.experiment.vars.cursor_x=e.event.clientX,this.experiment.vars.cursor_y=e.event.clientY;var t=this._runner._renderer.view.getBoundingClientRect();this.experiment.vars.uniform_coordinates,this._x=e.event.clientX-t.left,this._y=e.event.clientY-t.top,this.col=Math.floor(this._x/(this.experiment.vars.width/this.vars._ncol)),this.row=Math.floor(this._y/(this.experiment.vars.height/this.vars._nrow)),this.cell=this.row*this.vars._ncol+this.col+1,this.experiment.vars.response=this.cell,this.synonyms=[String(this.experiment.vars.response)],this.response_bookkeeping()}}]),TouchResponse}();t.default=s},"./src/js/osweb/python/python.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./node_modules/filbert/filbert.js")),s=_interopRequireDefault(r("./src/js/osweb/python/python_math.js")),o=_interopRequireDefault(r("./src/js/osweb/python/python_opensesame.js")),i=_interopRequireDefault(r("./src/js/osweb/python/python_random.js")),a=_interopRequireDefault(r("./src/js/osweb/python/python_string.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function PythonParser(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PythonParser),this._runner=e,this.python_math=new s.default(this._runner),this.python_opensesame=new o.default(this._runner),this.python_random=new i.default(this._runner),this.python_string=new a.default(this._runner),this._classes={},this._function_stack=[],this._global_return_value=null,this._inline_script=null,this._node=null,this._onConsole=null,this._stack=0,this._statement=null,this._status=0,this._variables={}}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(PythonParser,[{key:"_initialize",value:function _initialize(){this._variables.clock=this._runner._experiment.clock,this._variables.exp=this._runner._experiment,this._variables.items=this._runner._itemStore,this._variables.pool=this._runner._pool,this._variables.var=this._runner._experiment.vars,null!==this._runner._onConsole&&(this._onConsole=this._runner._onConsole),this.python_math._initialize(),this.python_opensesame._initialize(),this.python_random._initialize(),this.python_string._initialize()}},{key:"_parse",value:function _parse(e){if('""'===e)return null;var t=n.default.parse;try{return t(e,{locations:!1,ranges:!1})}catch(e){return this._runner._debugger.addError("Script parsing error: "+e.message),null}}},{key:"_get_context",value:function _get_context(e){var t=e.value.split(".");return"__pythonRuntime"===t[0]&&"imports"===t[1]?this._variables[t[2]]:void 0!==this._variables[t[0]]?this._variables[t[0]]:window[t[0]]}},{key:"_get_element",value:function _get_element(e){var t=e.value.split(".");return"__pythonRuntime"===t[0]?"imports"===t[1]?n.default.pythonRuntime.imports[t[2]][t[3]]:n.default.pythonRuntime[t[1]][t[2]]:void 0!==this._variables[t[0]]?1===t.length?this._variables[t[0]]:this._variables[t[0]][t[1]]:void 0!==window[t[0]]?1===t.length?window[t[0]]:window[t[0]][t[1]]:void 0}},{key:"_get_element_value",value:function _get_element_value(e){switch(e.type){case"identifier":var t=e.value.split(".");return 1===t.length?void 0!==this._variables[t[0]]?this._variables[t[0]]:window[t[0]]:-1!==t[0].indexOf("__filbertRight")?-1!==t[1].indexOf("__filbertIndex")?this._variables[t[0]][this._variables[t[1]]]:void 0!==this._variables[t[0]]?this._variables[t[0]][t[1]]:window[t[0]][t[1]]:"__pythonRuntime"===t[0]?"imports"===t[1]?n.default.pythonRuntime.imports[t[2]][t[3]]:n.default.pythonRuntime[t[1]][t[2]]:void 0!==this._variables[t[0]]?this._variables[t[0]][t[1]]:window[t[0]][t[1]];case"literal":return e.value}}},{key:"_set_element_value",value:function _set_element_value(e,t){var r=e.value.split(".");1===r.length?void 0!==window[r[0]]?window[r[0]]=t:this._variables[r[0]]=t:void 0!==window[r[0]]?window[r[0]][r[1]]=t:this._variables[r[0]][r[1]]=t}},{key:"_set_node",value:function _set_node(e){e.parent=this._node,this._node=e}},{key:"_set_return_value",value:function _set_return_value(e){this._node.parent.return_values=void 0===this._node.parent.return_values?[]:this._node.parent.return_values,this._node.parent.return_values.push(e)}},{key:"_array_expression",value:function _array_expression(){if(this._node.index=void 0===this._node.index?0:this._node.index,this._node.index<this._node.elements.length)this._node.index++,this._set_node(this._node.elements[this._node.index-1]),this._process_nodes();else{for(var e=0;e<this._node.return_values.length;e++)this._node.return_values[e]=this._get_element_value(this._node.return_values[e]);var t={type:"literal",value:this._node.return_values};this._set_return_value(t),this._node.index=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_assignment_expression",value:function _assignment_expression(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.left),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.right),this._process_nodes();break;case 2:var e;switch(this._node.operator){case"=":this._set_element_value(this._node.return_values[0],this._get_element_value(this._node.return_values[1]));break;case"-=":e=this._get_element_value(this._node.return_values[0]),this._set_element_value(this._node.return_values[0],e-this._get_element_value(this._node.return_values[1]));break;case"/=":e=this._get_element_value(this._node.return_values[0]),this._set_element_value(this._node.return_values[0],e/this._get_element_value(this._node.return_values[1]));break;case"%=":e=this._get_element_value(this._node.return_values[0]),this._set_element_value(this._node.return_values[0],e%this._get_element_value(this._node.return_values[1]))}this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_binary_expression",value:function _binary_expression(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.left),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.right),this._process_nodes();break;case 2:var e=this._get_element_value(this._node.return_values[0]),t=this._get_element_value(this._node.return_values[1]),r={type:"literal"};switch(this._node.operator){case"-":r.value=e-t;break;case"/":r.value=e/t;break;case"==":r.value=e===t;break;case"!=":r.value=e!==t;break;case">":r.value=e>t;break;case"<":r.value=e<t;break;case">=":r.value=e>=t;break;case"<=":r.value=e<=t;break;case"%":r.value="number"==typeof e&&"number"==typeof t?e%t:e.replace(/%s/g,t);break;case"instanceof":r.value=e instanceof t}this._set_return_value(r),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_block_statement",value:function _block_statement(){this._node.break=void 0!==this._node.break&&this._node.break,this._node.index=void 0===this._node.index?0:this._node.index,this._node.index<this._node.body.length&&!1===this._node.break?(this._node.index++,this._set_node(this._node.body[this._node.index-1]),this._process_nodes()):(!0===this._node.break&&(this._node.break=!1,this._node.parent.break=!0),this._node.index=0,this._node=this._node.parent,this._process_nodes())}},{key:"_break_statement",value:function _break_statement(){this._node.parent.break=!0,this._node=this._node.parent,this._process_nodes()}},{key:"_call_expression",value:function _call_expression(){switch(this._node.arguments=void 0===this._node.arguments?[]:this._node.arguments,this._node.index=void 0===this._node.index?0:this._node.index,this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.index<this._node.arguments.length?(this._node.index++,this._set_node(this._node.arguments[this._node.index-1]),this._process_nodes()):(this._node.status=1,this._set_node(this._node.callee),this._process_nodes());break;case 1:for(var e=this._node.return_values.pop(),t=[],r=0;r<this._node.return_values.length;r++)t.push(this._get_element_value(this._node.return_values[r]));var n=this._get_element(e),s=this._get_context(e);"sleep"===e.value||"__pythonRuntime.imports.clock.sleep"===e.value?(this._node.status=2,void 0===s&&(s=this),n.apply(s,t)):(void 0===s&&(s=this),e="FunctionExpression"===this._node.callee.type?{type:"literal",value:n}:{type:"literal",value:n.apply(s,t)},this._set_return_value(e),this._node.index=0,this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes());break;case 2:this._set_return_value(this.global_return_value),this._node.index=0,this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_empty_statement",value:function _empty_statement(){this._node=this._node.parent,this._process_nodes()}},{key:"_expression_statement",value:function _expression_statement(){this._node.status=void 0===this._node.status?0:this._node.status,0===this._node.status?(this._node.status=1,this._set_node(this._node.expression),this._process_nodes()):(this._node.status=0,this._node=this._node.parent,this._process_nodes())}},{key:"_for_statement",value:function _for_statement(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.init),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.test),this._process_nodes();break;case 2:!0===this._node.return_values[0].value?(this._node.status=3,this._node.return_values=[],this._set_node(this._node.body),this._process_nodes()):(this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes());break;case 3:this._node.status=1,this._set_node(this._node.update),this._process_nodes()}}},{key:"_for_in_statement",value:function _for_in_statement(){switch(this._node.index=void 0===this._node.index?0:this._node.index,this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.left),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.right),this._process_nodes();break;case 2:var e=this._get_element_value(this._node.return_values[1]);this._node.index<e.length?(this._set_element_value(this._node.return_values[0],e[this._node.index]),this._node.index++,this._set_node(this._node.body),this._process_nodes()):(this._node.index=0,this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes())}}},{key:"_function_expression",value:function _function_expression(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.body),this._process_nodes();break;case 1:var e=this._function_stack.pop();this._set_return_value(e),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_identifier",value:function _identifier(){var e={type:"identifier",value:this._node.name};this._set_return_value(e),this._node=this._node.parent,this._process_nodes()}},{key:"_if_statement",value:function _if_statement(){switch(this._node.break=void 0!==this._node.break&&this._node.break,this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.test),this._process_nodes();break;case 1:!0===this._node.return_values[0].value?(this._node.status=2,this._set_node(this._node.consequent),this._process_nodes()):null!==this._node.alternate?(this._node.status=2,this._set_node(this._node.alternate),this._process_nodes()):(this._node.status=2,this._process_nodes());break;case 2:!0===this._node.break&&(this._node.break=!1,this._node.parent.break=!0),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_literal",value:function _literal(){var e={type:"literal",value:this._node.value};this._set_return_value(e),this._node=this._node.parent,this._process_nodes()}},{key:"_logical_expression",value:function _logical_expression(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.left),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.right),this._process_nodes();break;case 2:var e=this._get_element_value(this._node.return_values[0]),t=this._get_element_value(this._node.return_values[1]),r={type:"literal"};switch(this._node.operator){case"&&":r.value=e&&t;break;case"||":r.value=e||t}this._set_return_value(r),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_member_expression",value:function _member_expression(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.object),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.property),this._process_nodes();break;case 2:var e={type:"identifier",value:this._node.return_values[0].value+"."+this._node.return_values[1].value};this._set_return_value(e),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_new_expression",value:function _new_expression(){if(this._node.arguments=void 0===this._node.arguments?[]:this._node.arguments,this._node.index=void 0===this._node.index?0:this._node.index,this._node.status=void 0===this._node.status?0:this._node.status,0===this._node.status)this._node.index<this._node.arguments.length?(this._node.index++,this._set_node(this._node.arguments[this._node.index-1]),this._process_nodes()):(this._node.status=1,this._set_node(this._node.callee),this._process_nodes());else{for(var e=this._node.return_values.pop(),t=this._get_element(e),r=this._get_context(e),n=[],s=0;s<this._node.return_values.length;s++)n.push(this._get_element_value(this._node.return_values[s]));e={type:"literal",value:t.apply(r,n)},this._set_return_value(e),this._node.index=0,this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_program",value:function _program(){this._node.index=void 0===this._node.index?0:this._node.index,this._node.index<this._node.body.length?(this._node.index++,this._set_node(this._node.body[this._node.index-1]),this._process_nodes()):(this._node.index=0,this._status=2,null!==this._inline_script&&this._inline_script._complete())}},{key:"_return_statement",value:function _return_statement(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.argument),this._process_nodes();break;case 1:var e={type:"identifier",value:this._node.return_values[0].value};this._function_stack.push(e),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_unary_expression",value:function _unary_expression(){if(this._node.status=void 0===this._node.status?0:this._node.status,0===this._node.status)this._node.status=1,this._set_node(this._node.argument),this._process_nodes();else{var e={type:"literal"};switch(this._node.operator){case"!":e.value=!this._node.return_values[0].value;break;case"-":e.value=-this._node.return_values[0].value}this._set_return_value(e),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_update_expression",value:function _update_expression(){if(this._node.status=void 0===this._node.status?0:this._node.status,0===this._node.status)this._node.status=1,this._set_node(this._node.argument),this._process_nodes();else{switch(this._node.operator){case"++":this._set_element_value(this._node.return_values[0],this._get_element_value(this._node.return_values[0])+1)}this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_variable_declaration",value:function _variable_declaration(){this._node.index=void 0===this._node.index?0:this._node.index,this._node.index<this._node.declarations.length?(this._node.index++,this._set_node(this._node.declarations[this._node.index-1]),this._process_nodes()):(this._node.index=0,this._node=this._node.parent,this._process_nodes())}},{key:"_variable_declarator",value:function _variable_declarator(){switch(this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:this._node.status=1,this._set_node(this._node.id),this._process_nodes();break;case 1:this._node.status=2,this._set_node(this._node.init),this._process_nodes();break;case 2:this._set_element_value(this._node.return_values[0],this._get_element_value(this._node.return_values[1])),this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()}}},{key:"_while_statement",value:function _while_statement(){switch(this._node.break=void 0!==this._node.break&&this._node.break,this._node.status=void 0===this._node.status?0:this._node.status,this._node.status){case 0:!0===this._node.break?(this._node.break=!1,this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes()):(this._node.status=1,this._set_node(this._node.test),this._process_nodes());break;case 1:!0===this._node.return_values[0].value?(this._node.status=0,this._node.return_values=[],this._set_node(this._node.body),this._process_nodes()):(this._node.status=0,this._node.return_values=[],this._node=this._node.parent,this._process_nodes())}}},{key:"_process_nodes",value:function _process_nodes(){if(null===this._statement)this._process_nodes_jump();else{if(this._node===this._statement)return this._node.body[0].return_values[0].value;this._process_nodes_timeout()}}},{key:"_process_nodes_jump",value:function _process_nodes_jump(){this._stack++,this._stack>500?(this._stack=0,setTimeout(function(){this._process_nodes_timeout()}.bind(this),1)):this._process_nodes_timeout()}},{key:"_process_nodes_timeout",value:function _process_nodes_timeout(){switch(this._node.type){case"ArrayExpression":this._array_expression();break;case"AssignmentExpression":this._assignment_expression();break;case"BinaryExpression":this._binary_expression();break;case"BlockStatement":this._block_statement();break;case"BreakStatement":this._break_statement();break;case"CallExpression":this._call_expression();break;case"EmptyStatement":this._empty_statement();break;case"ExpressionStatement":this._expression_statement();break;case"ForStatement":this._for_statement();break;case"ForInStatement":this._for_in_statement();break;case"FunctionExpression":this._function_expression();break;case"Identifier":this._identifier();break;case"IfStatement":this._if_statement();break;case"Literal":this._literal();break;case"LogicalExpression":this._logical_expression();break;case"MemberExpression":this._member_expression();break;case"NewExpression":this._new_expression();break;case"Program":this._program();break;case"ReturnStatement":this._return_statement();break;case"UnaryExpression":this._unary_expression();break;case"UpdateExpression":this._update_expression();break;case"VariableDeclaration":this._variable_declaration();break;case"VariableDeclarator":this._variable_declarator();break;case"WhileStatement":this._while_statement();break;default:this._runner._debugger.addError("Invalid node type to process: "+this._node.type)}}},{key:"_run_statement",value:function _run_statement(e){var t;return this._node=e.body[0],this._node.parent=e,this._statement=e,this._status=1,this._process_nodes(),t="identifier"===e.body[0].return_values[0].type?this._get_element_value(e.body[0].return_values[0]):e.body[0].return_values[0].value,e.body[0].return_values=[],t}},{key:"_run",value:function _run(e,t){this._inline_script=e,this._variables.self=e,this._node=t,this._node.parent=null,this._statement=null,this._status=1,this._process_nodes()}}]),PythonParser}();t.default=u},"./src/js/osweb/python/python_math.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/filbert/filbert.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function PythonMath(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PythonMath),this._runner=e,this.e=Math.E,this.pi=Math.PI}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(PythonMath,[{key:"_initialize",value:function _initialize(){n.default.pythonRuntime.imports.math={},n.default.pythonRuntime.imports.math.ceil=this.ceil,n.default.pythonRuntime.imports.math.copysign=this.copysign,n.default.pythonRuntime.imports.math.fabs=this.fabs,n.default.pythonRuntime.imports.math.factorial=this.factorial,n.default.pythonRuntime.imports.math.floor=this.floor,n.default.pythonRuntime.imports.math.fmod=this.fmod,n.default.pythonRuntime.imports.math.frexp=this.frexp,n.default.pythonRuntime.imports.math.fsum=this.fsum,n.default.pythonRuntime.imports.math.acos=this.acos,n.default.pythonRuntime.imports.math.asin=this.asin,n.default.pythonRuntime.imports.math.atan=this.atan,n.default.pythonRuntime.imports.math.atan2=this.atan2,n.default.pythonRuntime.imports.math.cos=this.cos,n.default.pythonRuntime.imports.math.hypot=this.hypot,n.default.pythonRuntime.imports.math.sin=this.sin,n.default.pythonRuntime.imports.math.tan=this.tan,n.default.pythonRuntime.imports.math.e=this.e,n.default.pythonRuntime.imports.math.pi=this.pi}},{key:"ceil",value:function ceil(e){}},{key:"copysign",value:function copysign(e,t){}},{key:"fabs",value:function fabs(e){}},{key:"factorial",value:function factorial(e){}},{key:"floor",value:function floor(e){return Math.floor(e)}},{key:"fmod",value:function fmod(e,t){}},{key:"frexp",value:function frexp(e){}},{key:"fsum",value:function fsum(e){}},{key:"acos",value:function acos(e){return Math.acos(e)}},{key:"asin",value:function asin(e){return Math.asin(e)}},{key:"atan",value:function atan(e){return Math.atan(e)}},{key:"atan2",value:function atan2(e,t){return Math.atan2(e,t)}},{key:"cos",value:function cos(e){return Math.cos(e)}},{key:"hypot",value:function hypot(e,t){}},{key:"sin",value:function sin(e){return Math.sin(e)}},{key:"tan",value:function tan(e){return Math.tan(e)}}]),PythonMath}();t.default=s},"./src/js/osweb/python/python_opensesame.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./node_modules/filbert/filbert.js")),s=_interopRequireDefault(r("./src/js/osweb/backends/canvas.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function PythonOpenSesame(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PythonOpenSesame),this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(PythonOpenSesame,[{key:"_initialize",value:function _initialize(){this._objects={},n.default.pythonRuntime.imports.clock={},n.default.pythonRuntime.imports.clock.sleep=this._runner._experiment.clock.sleep,n.default.pythonRuntime.imports.clock.time=this._runner._experiment.clock.time,n.default.pythonRuntime.imports.log={},n.default.pythonRuntime.imports.log.close=this._runner._experiment._log.close,n.default.pythonRuntime.imports.log.open=this._runner._experiment._log.open,n.default.pythonRuntime.imports.log.write=this._runner._experiment._log.write,n.default.pythonRuntime.imports.log.write_vars=this._runner._experiment._log.write_vars,n.default.pythonRuntime.imports.var=this._runner._experiment.vars,n.default.pythonRuntime.imports.var.get=this._runner._experiment.vars.get,n.default.pythonRuntime.imports.var.has=this._runner._experiment.vars.has,n.default.pythonRuntime.imports.var.set=this._runner._experiment.vars.set,n.default.pythonRuntime.imports.var.unset=this._runner._experiment.vars.unset,n.default.pythonRuntime.functions.reset_feedback=this._runner._experiment.reset_feedback,n.default.pythonRuntime.functions.set_subject_nr=this._runner._experiment.set_subject,n.default.pythonRuntime.functions.canvas=this.canvas,n.default.pythonRuntime.functions.copy_sketchpad=this.copy_sketchpad,n.default.pythonRuntime.functions.keyboard=this.keyboard,n.default.pythonRuntime.functions.mouse=this.mouse,n.default.pythonRuntime.functions.pause=this.pause,n.default.pythonRuntime.functions.set_subject_nr=this.set_subject_nr,n.default.pythonRuntime.functions.sometimes=this.sometimes,n.default.pythonRuntime.functions.synth=this.synth,n.default.pythonRuntime.functions.xy_circle=this.xy_circle,n.default.pythonRuntime.functions.xy_distance=this.xy_distance,n.default.pythonRuntime.functions.xy_from_polar=this.xy_from_polar,n.default.pythonRuntime.functions.xy_grid=this.xy_grid,n.default.pythonRuntime.functions.xy_random=this.xy_random,n.default.pythonRuntime.functions.xy_to_polar=this.xy_to_polar}},{key:"canvas",value:function canvas(e,t){return new s.default(this._runner._experiment,e,t)}},{key:"copy_sketchpad",value:function copy_sketchpad(e){}},{key:"keyboard",value:function keyboard(e){}},{key:"mouse",value:function mouse(e){}},{key:"pause",value:function pause(e){}},{key:"sampler",value:function sampler(e,t){}},{key:"set_response",value:function set_response(e,t,r){}},{key:"sometimes",value:function sometimes(e){}},{key:"synth",value:function synth(e,t,r,n,s){}},{key:"xy_circle",value:function xy_circle(e,t,r,n){}},{key:"xy_distance",value:function xy_distance(e,t,r,n){}},{key:"xy_from_polar",value:function xy_from_polar(e,t,r){}},{key:"xy_grid",value:function xy_grid(e,t,r){}},{key:"xy_random",value:function xy_random(e,t,r,n,s){}},{key:"xy_to_polar",value:function xy_to_polar(e,t,r){}}]),PythonOpenSesame}();t.default=o},"./src/js/osweb/python/python_random.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/filbert/filbert.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function PythonRandom(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PythonRandom),this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(PythonRandom,[{key:"_initialize",value:function _initialize(){n.default.pythonRuntime.imports.random={},n.default.pythonRuntime.imports.random.random=this.random,n.default.pythonRuntime.imports.random.shuffle=this.shuffle}},{key:"random",value:function random(){return Math.random()}},{key:"shuffle",value:function shuffle(e,t){for(var r,n,s=e.length;0!==s;)n=Math.floor(Math.random()*s),r=e[s-=1],e[s]=e[n],e[n]=r;return e}}]),PythonRandom}();t.default=s},"./src/js/osweb/python/python_string.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function PythonString(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PythonString),this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(PythonString,[{key:"_initialize",value:function _initialize(){}},{key:"capitalize",value:function capitalize(){}},{key:"center",value:function center(e,t){}},{key:"upper",value:function upper(){}}]),PythonString}();t.default=n},"./src/js/osweb/system/constants.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.itemClasses=void 0;var n=_interopRequireDefault(r("./src/js/osweb/items/loop.js")),s=_interopRequireDefault(r("./src/js/osweb/items/sequence.js")),o=_interopRequireDefault(r("./src/js/osweb/items/sketchpad.js")),i=_interopRequireDefault(r("./src/js/osweb/items/feedback.js")),a=_interopRequireDefault(r("./src/js/osweb/items/inline_script.js")),u=_interopRequireDefault(r("./src/js/osweb/items/keyboard_response.js")),l=_interopRequireDefault(r("./src/js/osweb/items/mouse_response.js")),c=_interopRequireDefault(r("./src/js/osweb/items/logger.js")),_=_interopRequireDefault(r("./src/js/osweb/items/sampler.js")),f=_interopRequireDefault(r("./src/js/osweb/items/synth.js")),p=_interopRequireDefault(r("./src/js/osweb/elements/arrow.js")),h=_interopRequireDefault(r("./src/js/osweb/elements/circle.js")),d=_interopRequireDefault(r("./src/js/osweb/elements/ellipse.js")),y=_interopRequireDefault(r("./src/js/osweb/elements/fixdot.js")),m=_interopRequireDefault(r("./src/js/osweb/elements/gabor.js")),v=_interopRequireDefault(r("./src/js/osweb/elements/image.js")),b=_interopRequireDefault(r("./src/js/osweb/elements/line.js")),g=_interopRequireDefault(r("./src/js/osweb/elements/noise.js")),w=_interopRequireDefault(r("./src/js/osweb/elements/rect.js")),x=_interopRequireDefault(r("./src/js/osweb/elements/textline.js")),P=_interopRequireDefault(r("./src/js/osweb/widgets/button.js")),O=_interopRequireDefault(r("./src/js/osweb/widgets/checkbox.js")),k=_interopRequireDefault(r("./src/js/osweb/widgets/form.js")),j=_interopRequireDefault(r("./src/js/osweb/widgets/image_widget.js")),S=_interopRequireDefault(r("./src/js/osweb/widgets/image_button.js")),R=_interopRequireDefault(r("./src/js/osweb/widgets/label.js")),C=_interopRequireDefault(r("./src/js/osweb/widgets/rating_scale.js")),E=_interopRequireDefault(r("./src/js/osweb/widgets/text_input.js")),T=_interopRequireDefault(r("./src/js/osweb/widgets/themes.js")),I=_interopRequireDefault(r("./src/js/osweb/plugins/advanced_delay.js")),M=_interopRequireDefault(r("./src/js/osweb/plugins/form_base.js")),D=_interopRequireDefault(r("./src/js/osweb/plugins/form_consent.js")),F=_interopRequireDefault(r("./src/js/osweb/plugins/form_multiple_choice.js")),N=_interopRequireDefault(r("./src/js/osweb/plugins/form_text_display.js")),q=_interopRequireDefault(r("./src/js/osweb/plugins/form_text_input.js")),L=_interopRequireDefault(r("./src/js/osweb/plugins/media_player.js")),A=_interopRequireDefault(r("./src/js/osweb/plugins/notepad.js")),z=_interopRequireDefault(r("./src/js/osweb/plugins/repeat_cycle.js")),B=_interopRequireDefault(r("./src/js/osweb/plugins/reset_feedback.js")),W=_interopRequireDefault(r("./src/js/osweb/plugins/touch_response.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var U={loop:n.default,sequence:s.default,sketchpad:o.default,feedback:i.default,inline_script:a.default,keyboard_response:u.default,mouse_response:l.default,logger:c.default,sampler:_.default,synth:f.default,arrow:p.default,circle:h.default,ellipse:d.default,fixdot:y.default,gabor:m.default,image:v.default,line:b.default,noise:g.default,rect:w.default,textline:x.default,button_widget:P.default,checkbox_widget:O.default,form_widget:k.default,image_button_widget:S.default,image_widget:j.default,label_widget:R.default,rating_scale_widget:C.default,text_input_widget:E.default,themes:T.default,advanced_delay:I.default,form_base:M.default,form_consent:D.default,form_multiple_choice:F.default,form_text_display:N.default,form_text_input:q.default,media_player_mpy:L.default,notepad:A.default,repeat_cycle:z.default,reset_feedback:B.default,touch_response:W.default};t.itemClasses=U;t.constants={PRESSES_ONLY:1,RELEASES_ONLY:2,PRESSES_AND_RELEASES:3,RESPONSE_NONE:0,RESPONSE_DURATION:1,RESPONSE_KEYBOARD:2,RESPONSE_MOUSE:3,RESPONSE_SOUND:4,RESPONSE_AUTOKEYBOARD:5,RESPONSE_AUTOMOUSE:6,STATUS_NONE:0,STATUS_BUILD:1,STATUS_INITIALIZE:2,STATUS_EXECUTE:3,STATUS_FINALIZE:4,TIMER_NONE:0,TIMER_WAIT:1,TIMER_EXIT:2,TIMER_PAUSE:3,TIMER_RESUME:4,TIMER_DONE:5,TIMER_BREAK:6,TIMER_ERROR:7,TIMER_FORM:8}},"./src/js/osweb/system/convertor.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./node_modules/lodash/lodash.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Convertor(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Convertor),this.item=null,this.runner=e,this.variable=null,this.variabelName=""}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Convertor,[{key:"parseValue",value:function parseValue(e){return e.length>=4&&'"'===e.substr(0,1)&&'"'===e.substr(e.length-1,1)?e.substr(1,e.length-2):e}},{key:"parseLine",value:function parseLine(e){var t=e.match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g);if(null!==t)switch(t[0]){case"define":this.item=this.runner._itemStore.newItem(t[1],t[2],"");break;case"draw":for(var r=this.runner._itemStore._newElementClass(t[1],this.item,""),s=2;s<t.length;s++){var o=t[s].split("=",2);r.properties[o[0]]=o[1]}this.item.elements.push(r);break;case"run":"sequence"===this.item.type?this.item.items.push({item:t[1],cond:t[2]}):this.item.vars.item=t[1];break;case"set":this.item.vars[t[1]]=this.parseValue(t[2]);break;case"setcycle":var i=this.parseValue(t[3]);"="===i[0]?null!==(i=this.runner._pythonParser._prepare(i.slice(1)))&&(i=i.body[0]):i=(0,n.isNumber)(i)?Number(i):i,void 0===this.item.matrix[t[1]]&&(this.item.matrix[t[1]]={}),this.item.matrix[t[1]][t[2]]=i;break;case"widget":t.shift(),this.item._widgets.push(t);break;default:t[0].length>5&&"__"===t[0].substr(0,2)&&"__"===t[0].substr(-2)?"__end__"===t[0]?(this.item.vars[this.variableName]=this.variable,this.variable=null):(this.variableName=t[0].substr(2,t[0].length-4),this.variable=[]):null!==this.variable&&this.variable.push(e)}else null!==this.variable?this.variable.push(""):this.item=this.runner._experiment}},{key:"parseScript",value:function parseScript(e){if(this.item=this.runner._experiment,null!==e)for(var t=e.split("\n"),r=0;r<t.length;r++)this.parseLine(t[r])}}]),Convertor}();t.default=s},"./src/js/osweb/system/debugger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Debugger(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Debugger),this._runner=e,this.enabled=!0,this.error=!1,this.messageLog=[]}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Debugger,[{key:"_initialize",value:function _initialize(){this.messageLog=[]}},{key:"_finalize",value:function _finalize(){!0===this.enabled&&console.log(this.messageLog),this.messageLog=[]}},{key:"addError",value:function addError(e){this.error=!0,this._runner._events.state=n.constants.TIMER_ERROR,console.error("OSWeb has stopped running due to a fatal error."),console.error(e)}},{key:"addMessage",value:function addMessage(e){this.messageLog.push(e),!0===this.enabled&&console.log(e)}},{key:"msg",value:function msg(e){this.addMesage(e)}}]),Debugger}();t.default=s},"./src/js/osweb/system/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/system/constants.js"),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function Events(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Events),this._currentItem=null,this._keyDownEvent=null,this._keyDownHandler=null,this._keyPressMode=n.constants.PRESSES_ONLY,this._keyUpHandler=null,this._mouseDownEvent=null,this._mouseDownHandler=null,this._mouseMoveEvent=null,this._mouseMoveHandler=null,this._mousePressMode=n.constants.PRESSES_ONLY,this._mouseUpHandler=null,this._runner=e,this._responseGiven=!1,this._responseList=null,this._responseType=n.constants.RESPONSE_NONE,this._soundHasEnded=!1,this._state=n.constants.TIMER_NONE,this._statePrevious=n.constants.TIMER_NONE,this._timeHandler=null,this._timeOut=-1,this._timeStamp=-1,this._videoHasEnded=!1,this._KEY_CODES=["","","","","","","help","","backspace","tab","","","clear","enter","enter_special","","shift","ctrl","alt","pause","caps","","","","","","","escape","","","","","space","page up","page down","end","home","left","up","right","down","select","print","execute","print screen","insert","delete","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","left meta","right meta","menu","","","kp0","kp1","kp2","kp3","kp4","kp5","kp6","kp7","kp8","kp9","kp_multiply","kp_plus","","kp_minus","kp_period","kp_divide","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","","","","","","","","","","","","","","","","","","","","","numlock","scrollock","","","","","","","","","","","","","","","^","!",'"',"#","$","%","&","_","(",")","*","+","|","_","{","}","~","","","","","","","","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],this._KEY_SHIFTCODES=["","","","","","","","","","","","","","","","","","","","pause","","","","","","","","","","","","","","","","","","","","","","","","","","","","",")","!","@","#","$","%","^","&","*","(","",":","","+","","","","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","y","z","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","","","","<","",">","?","~","","","","","","","","","","","","","","","","","","","","","","","","","","","{","|","}",'"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Events,[{key:"_initialize",value:function _initialize(){this._keyDownHandler=this._keyDown.bind(this),this._keyUpHandler=this._keyUp.bind(this),window.addEventListener("keydown",this._keyDownHandler),window.addEventListener("keyup",this._keyUpHandler),this._mouseDownHandler=this._mouseDown.bind(this),this._mouseMoveHandler=this._mouseMove.bind(this),this._mouseUpHandler=this._mouseUp.bind(this),this._runner._renderer.view.addEventListener("mousedown",this._mouseDownHandler),this._runner._renderer.view.addEventListener("mousemove",this._mouseMoveHandler),this._runner._renderer.view.addEventListener("mouseup",this._mouseUpHandler),this._currentItem=this._runner._experiment,this._state=n.constants.TIMER_NONE,this._timeHandler=new s.ticker.Ticker,this._timeHandler.add(this._time.bind(this)),this._timeHandler.start()}},{key:"_finalize",value:function _finalize(){window.removeEventListener("keydown",this._keyDownHandler),window.removeEventListener("keyup",this._keyUpHandler),this._runner._renderer.view.removeEventListener("mousedown",this._mouseDownHandler),this._runner._renderer.view.removeEventListener("mousemove",this._mouseMoveHandler),this._runner._renderer.view.removeEventListener("mouseup",this._mouseUpHandler),this._timeHandler.stop(),this._timeHandler.remove(this._time),this._currentItem=null,this._mouseDownEvent=null,this._mouseMoveEvent=null,this._responseList=null,this._timeHandler=null}},{key:"_convertKeyCode",value:function _convertKeyCode(e){return!0===e.shiftKey&&16!==e.keyCode?this._KEY_SHIFTCODES[e.keyCode]:!0===e.shiftKey&&16===e.keyCode?1===e.location?"lshift":"rshift":!0===e.ctrlKey&&17===e.keyCode?1===e.location?"lctrl":"rctrl":!0===e.altKey&&18===e.keyCode?1===e.location?"lalt":"ralt":this._KEY_CODES[e.keyCode]}},{key:"_keyDown",value:function _keyDown(e){this._keyDownEvent={event:e,rtTime:this._runner._experiment.clock.time()},27===e.keyCode&&this._state!==n.constants.TIMER_PAUSE?(this._statePrevious=this._state,this._state=n.constants.TIMER_PAUSE,this._runner._screen._showPauseScreen()):this._state!==n.constants.TIMER_WAIT||this._keyPressMode!==n.constants.PRESSES_ONLY&&this._keyPressMode!==n.constants.PRESSES_AND_RELEASES||this._processKeyboardEvent(e,1)}},{key:"_keyUp",value:function _keyUp(e){this._state!==n.constants.TIMER_WAIT||this._keyPressMode!==n.constants.RELEASES_ONLY&&this._keyPressMode!==n.constants.PRESSES_AND_RELEASES||this._processKeyboardEvent(e,0)}},{key:"_processKeyboardEvent",value:function _processKeyboardEvent(e,t){var r={event:e,rtTime:this._runner._experiment.clock.time(),state:t,type:n.constants.RESPONSE_KEYBOARD};r.resp=this._convertKeyCode(e),this._responseType===n.constants.RESPONSE_KEYBOARD&&(null===this._responseList||this._responseList.indexOf(r.resp)>=0)&&(null!==this._currentItem&&this._currentItem._update(r),this._responseGiven=!0)}},{key:"_mouseContext",value:function _mouseContext(e){return e.preventDefault(),!1}},{key:"_mouseMove",value:function _mouseMove(e){this._mouseMoveEvent={event:e,rtTime:this._runner._experiment.clock.time()}}},{key:"_mouseDown",value:function _mouseDown(e){this._mouseDownEvent={event:e,rtTime:this._runner._experiment.clock.time()},this._state!==n.constants.TIMER_WAIT||this._mousePressMode!==n.constants.PRESSES_ONLY&&this._mousePressMode!==n.constants.PRESSES_AND_RELEASES||this._processMouseEvent(e,1)}},{key:"_mouseUp",value:function _mouseUp(e){this._state!==n.constants.TIMER_WAIT||this._mousePressMode!==n.constants.RELEASES_ONLY&&this._mousePressMode!==n.constants.PRESSES_AND_RELEASES||this._processMouseEvent(e,0)}},{key:"_processMouseEvent",value:function _processMouseEvent(e,t){var r={event:e,rtTime:this._runner._experiment.clock.time(),state:t,type:n.constants.RESPONSE_MOUSE};r.resp=String(e.button+1),this._responseType===n.constants.RESPONSE_MOUSE&&(null===this._responseList||this._responseList.indexOf(r.resp)>=0)&&(null!==this._currentItem&&this._currentItem._update(r),this._responseGiven=!0)}},{key:"_audioEnded",value:function _audioEnded(e){"sound"===this.duration&&(this._soundHasEnded=!0)}},{key:"_videoEnded",value:function _videoEnded(e){"video"===this.duration&&(this._experiment._runner._events._videoHasEnded=!0)}},{key:"_videoPlay",value:function _videoPlay(e){}},{key:"_time",value:function _time(e){switch(this._state){case n.constants.TIMER_NONE:break;case n.constants.TIMER_WAIT:this._timeStamp=this._currentItem.clock.time(),-1===this._timeOut&&(!0===this._responseGiven||!0===this._soundHasEnded||!0===this._videoHasEnded)||this._timeOut>0&&(this._responseType===n.constants.RESPONSE_KEYBOARD||this._responseType===n.constants.RESPONSE_MOUSE)&&!0===this._responseGiven||this._timeOut>0&&this._timeStamp-this._currentItem.experiment.vars.get("time_"+this._currentItem.name)>this._timeOut?(this._state=n.constants.TIMER_NONE,this._runner._itemStack.pop(),this._currentItem._complete()):this._currentItem._update(null);break;case n.constants.TIMER_PAUSE:case n.constants.TIMER_RESUME:break;case n.constants.TIMER_BREAK:case n.constants.TIMER_EXIT:this._state=n.constants.TIMER_NONE,this._runner._finalize();break;case n.constants.TIMER_FORM:this._currentItem._update(null)}}},{key:"_run",value:function _run(e,t,r){this._responseList=r,this._responseType=t,this._timeOut=e,this._responseGiven=!1,this._soundHasEnded=!1,this._state=n.constants.TIMER_WAIT,this._videoHasEnded=!1}}]),Events}();t.default=o},"./src/js/osweb/system/parameters.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./node_modules/lodash/lodash.js");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Parameters(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Parameters),this._itemCounter=0,this._parameters=[],this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Parameters,[{key:"_initialize",value:function _initialize(){if(null!==this._runner._subject)this._runner._experiment.set_subject(this._runner._subject),this._runner._screen._setupClickScreen();else{this._runner._screen._updateIntroScreen("Retrieving input parameters.");this._parameters.push({dataType:"number",defaultValue:"0",name:"subject_nr",title:"Starting the experiment",prompt:"Please enter the subject number",promptEnabled:!0}),this._processParameters()}}},{key:"_processParameters",value:function _processParameters(){this._itemCounter<this._parameters.length?this._processParameter(this._parameters[this._itemCounter]):this._transferParameters()}},{key:"_onParamConfirm",value:function _onParamConfirm(e,t){e.response=t,this._itemCounter++,this._processParameters()}},{key:"_onParamCancel",value:function _onParamCancel(){this._runner._exit()}},{key:"_processParameter",value:function _processParameter(e){if(!0===e.promptEnabled)if((0,n.isFunction)(this._runner._prompt))this._runner._prompt(e.title,e.prompt,e.defaultValue,e.dataType,this._onParamConfirm.bind(this,e),this._onParamCancel.bind(this));else{var t=window.prompt(e.prompt,e.defaultValue);null===t?this._onParamCancel():this._onParamConfirm(e,t)}else e.response=e.defaultValue,this._itemCounter++,this._processParameters()}},{key:"_transferParameters",value:function _transferParameters(){for(var e=0;e<this._parameters.length;e++)"subject_nr"===this._parameters[e].name?this._runner._experiment.set_subject(this._parameters[e].response):this._runner._experiment.vars.set(this._parameters[e].name,this._parameters[e].response);this._runner._screen._setupClickScreen()}}]),Parameters}();t.default=s},"./src/js/osweb/system/runner.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),s=r("./src/js/osweb/system/constants.js"),o=_interopRequireDefault(r("./src/js/osweb/system/debugger.js")),i=_interopRequireDefault(r("./src/js/osweb/system/convertor.js")),a=_interopRequireDefault(r("./src/js/osweb/system/events.js")),u=_interopRequireDefault(r("./src/js/osweb/system/parameters.js")),l=_interopRequireDefault(r("./src/js/osweb/system/screen.js")),c=_interopRequireDefault(r("./src/js/osweb/system/session.js")),_=_interopRequireDefault(r("./src/js/osweb/system/transfer.js")),f=_interopRequireDefault(r("./src/js/osweb/classes/item_stack.js")),p=_interopRequireDefault(r("./src/js/osweb/classes/item_store.js")),h=_interopRequireDefault(r("./src/js/osweb/classes/python_workspace.js")),d=_interopRequireDefault(r("./src/js/osweb/classes/file_pool_store.js")),y=_interopRequireDefault(r("./src/js/osweb/classes/syntax.js")),m=_interopRequireDefault(r("./src/js/osweb/python/python.js")),v=_interopRequireDefault(r("./src/js/osweb/items/experiment.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,s,o,i){try{var a=e[o](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,s)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function Runner(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Runner),this._confirm=null,this._container=null,this._data=null,this._experiment=null,this._fullScreen=!1,this._mimetype=null,this._name="noname.exp",this._onConsole=null,this._onFinished=null,this._onLog=null,this._prompt=null,this._renderer=null,this._scaleMode="noScale",this._script=null,this._source=null,this._subject=null,this._target=null,this._debugger=new o.default(this),this._convertor=new i.default(this),this._events=new a.default(this),this._itemStack=new f.default(this),this._itemStore=new p.default(this),this._parameters=new u.default(this),this._pool=new d.default(this),this._pythonParser=new m.default(this),this._pythonWorkspace=new h.default(this),this._screen=new l.default(this),this._session=new c.default(this),this._syntax=new y.default(this),this._transfer=new _.default(this),this._setupContent(e)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Runner,[{key:"_setupContent",value:function _setupContent(e){void 0!==e?(this._container="string"==typeof e?document.getElementById(e):e,this._renderer=n.autoDetectRenderer(800,600,{antialias:!0,transparent:!1,resolution:1}),this._renderer.backgroundColor=0,this._container.appendChild(this._renderer.view)):this._debugger.addError("No content parameter specified.")}},{key:"_setupContext",value:function(){var e=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,s,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,s,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(e){var t,r,n,s,o,i,a,u,l,c,_,f,p,h,d;return regeneratorRuntime.wrap(function _callee$(y){for(;;)switch(y.prev=y.next){case 0:if(void 0===e){y.next=50;break}return t=e.confirm,this._confirm=void 0===t?null:t,r=e.debug,this._debugger.enabled=void 0!==r&&r,n=e.fullScreen,this._fullScreen=void 0!==n&&n,s=e.introClick,this._screen._click=void 0===s||s,o=e.introScreen,this._screen._active=void 0===o||o,i=e.mimetype,this._mimetype=void 0===i?null:i,a=e.name,this._name=void 0===a?"noname.exp":a,u=e.onConsole,this._onConsole=void 0===u?null:u,l=e.onFinished,this._onFinished=void 0===l?null:l,c=e.onLog,this._onLog=void 0===c?null:c,_=e.prompt,this._prompt=void 0===_?null:_,f=e.scaleMode,this._scaleMode=void 0===f?"noScale":f,p=e.source,this._source=void 0===p?null:p,h=e.subject,this._subject=void 0===h?null:h,d=e.target,this._target=void 0===d?null:d,this._screen._setupIntroScreen(),this._screen._updateIntroScreen("Loading experiment."),this._screen._updateProgressBar(-1),y.prev=34,y.next=37,this._transfer._readSource(this._source);case 37:this._script=y.sent,y.next=45;break;case 40:return y.prev=40,y.t0=y.catch(34),this._debugger.addError("Error reading osexp: ".concat(y.t0)),this._exit(),y.abrupt("return");case 45:this._screen._updateIntroScreen("Building experiment structure."),this._build(),this._parameters._initialize(),y.next=51;break;case 50:this.debugger.addError("No context parameter specified.");case 51:case"end":return y.stop()}},_callee,this,[[34,40]])}));return function _setupContext(t){return e.apply(this,arguments)}}()},{key:"_build",value:function _build(){this._experiment=new v.default(this,this._name,this._script),this._convertor.parseScript(this._script),this._experiment.from_string(this._script),this._onLog&&(this._experiment.onLog=this._onLog)}},{key:"_initialize",value:function _initialize(){this._debugger._initialize(),this._events._initialize(),this._pythonParser._initialize(),this._session._initialize(),this._experiment.prepare(),this._experiment.run()}},{key:"_finalize",value:function _finalize(){this._events._finalize(),this._debugger._finalize(),this._itemStore._clean_up(),this._pool._clean_up(),this._exit()}},{key:"_exit",value:function _exit(){this._screen._fullScreenExit(),this._experiment._canvas._exitDisplay(),this._experiment=null,this._onFinished&&this._onFinished(this._data,this._session._session)}},{key:"exit",value:function exit(){this._events._state=s.constants.TIMER_BREAK}},{key:"run",value:function run(e){this._setupContext(e)}}]),Runner}();t.default=b},"./src/js/osweb/system/screen.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("./src/js/osweb/index.js"),s=r("./node_modules/lodash/lodash.js"),o=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function Screen(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Screen),this._runner=e,this._active=!0,this._click=!0,this._container=null,this._exit=!1}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Screen,[{key:"_fullScreenInit",value:function _fullScreenInit(){if(!0===this._runner._fullScreen){var e=this._runner._container;e.requestFullscreen?(document.addEventListener("fullscreenchange",function(e){this._fullScreenChanged(e)}.bind(this)),document.addEventListener("fullscreenerror",function(e){this._fullScreenError(e)}.bind(this)),e.requestFullscreen()):e.webkitRequestFullscreen?(document.addEventListener("webkitfullscreenchange",function(e){this._fullScreenChanged(e)}.bind(this)),document.addEventListener("webkitfullscreenerror",function(e){this._fullScreenError(e)}.bind(this)),e.webkitRequestFullscreen()):e.mozRequestFullScreen?(document.addEventListener("mozfullscreenchange",function(e){this._fullScreenChanged(e)}.bind(this)),document.addEventListener("mozfullscreenerror",function(e){this._fullScreenError(e)}.bind(this)),e.mozRequestFullScreen()):e.msRequestFullscreen&&(document.addEventListener("MSFullscreenChange",function(e){this._fullScreenChanged(e)}.bind(this)),document.addEventListener("MSFullscreenError",function(e){this._fullScreenError(e)}.bind(this)),e.msRequestFullscreen())}}},{key:"_fullScreenExit",value:function _fullScreenExit(){!0===this._runner._fullScreen&&(this._exit=!0,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}},{key:"_fullScreenChanged",value:function _fullScreenChanged(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)switch(this._runner._scaleMode){case"noScale":this._runner._renderer.view.style.top="0px",this._runner._renderer.view.style.bottom="0px",this._runner._renderer.view.style.left="0px",this._runner._renderer.view.style.right="0px",this._runner._renderer.view.style.right="0px",this._runner._renderer.view.style.margin="auto",this._runner._renderer.view.style.display="block",this._runner._renderer.view.style.position="absolute",this._runner._renderer.render(this._runner._experiment._currentCanvas._container);break;case"showAll":if(this._runner._renderer.view.style.top="0px",this._runner._renderer.view.style.bottom="0px",this._runner._renderer.view.style.left="0px",this._runner._renderer.view.style.right="0px",this._runner._renderer.view.style.right="0px",this._runner._renderer.view.style.margin="auto",this._runner._renderer.view.style.display="block",this._runner._renderer.view.style.position="absolute",this._runner._container.clientWidth-this._runner._experiment.vars.width>this._runner._container.clientHeight-this._runner._experiment.vars.height){var e=this._runner._container.clientHeight/this._runner._experiment.vars.height;this._runner._renderer.resize(Math.round(this._runner._experiment.vars.width*e),this._runner._container.clientHeight),this._runner._experiment._scale_x=Math.round(this._runner._experiment.vars.width*e)/this._runner._experiment.vars.width,this._runner._experiment._scale_y=this._runner._container.clientHeight/this._runner._experiment.vars.height}else{var t=this._runner._container.clientWidth/this._runner._experiment.vars.width;this._runner._renderer.resize(this._runner._container.clientWidth,Math.round(this._runner._experiment.vars.height*t)),this._runner._experiment._scale_x=this._runner._container.clientWidth/this._runner._experiment.vars.width,this._runner._experiment._scale_y=Math.round(this._runner._experiment.vars.height*t)/this._runner._experiment.vars.height}this._runner._experiment._currentCanvas._container.scale.x=this._runner._experiment._scale_x,this._runner._experiment._currentCanvas._container.scale.y=this._runner._experiment._scale_y,this._runner._renderer.render(this._runner._experiment._currentCanvas._container);break;case"exactFit":this._runner._experiment._scale_x=this._runner._container.clientWidth/this._runner._experiment.vars.width,this._runner._experiment._scale_y=this._runner._container.clientHeight/this._runner._experiment.vars.height,this._runner._renderer.resize(this._runner._container.clientWidth,this._runner._container.clientHeight),this._runner._experiment._currentCanvas._container.scale.x=this._runner._experiment._scale_x,this._runner._experiment._currentCanvas._container.scale.y=this._runner._experiment._scale_y,this._runner._renderer.render(this._runner._experiment._currentCanvas._container)}else!1===this._exit&&(this._runner._experiment._scale_x=1,this._runner._experiment._scale_y=1,this._runner._renderer.resize(this._runner._experiment.vars.width,this._runner._experiment.vars.height),this._runner._experiment._currentCanvas._container.scale.x=1,this._runner._experiment._currentCanvas._container.scale.y=1,this._runner._renderer.render(this._runner._experiment._currentCanvas._container),(0,s.isFunction)(this._runner._confirm)&&this._runner._confirm("Leaving full-screen mode, pausing experiment.","Please press ok the resume the experiment otherwise cancel to stop.",this._onFullScreenConfirm.bind(this),this._onFullScreenCancel.bind(this)))}},{key:"_fullScreenError",value:function _fullScreenError(){this._runner.debugger.addError("Could not start full-screen mode, experiment stopped.")}},{key:"_onFullScreenConfirm",value:function _onFullScreenConfirm(){var e=this._runner._container;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"_onFullScreenCancel",value:function _onFullScreenCancel(){this._runner._finalize()}},{key:"_setupIntroScreen",value:function _setupIntroScreen(){!0===this._active&&(this._introScreen=new o.Container,this._introLine=new o.Graphics,this._introLine.lineStyle(1,11184810,1),this._introLine.moveTo(0,0),this._introLine.lineTo(400,0),this._introLine.x=200,this._introLine.y=159,this._introScreen.addChild(this._introLine),this._introText1=new o.Text("Os",{fontFamily:"Times",fontSize:24,fill:"#FF0000"}),this._introText1.position.set(200,135),this._introScreen.addChild(this._introText1),this._introText2=new o.Text("web - version "+n.VERSION_NUMBER,{fontFamily:"Arial",fontSize:14,fill:"#FFFFFF"}),this._introText2.position.set(231,142),this._introScreen.addChild(this._introText2),this._introText3=new o.Text("",{fontFamily:"Arial",fontSize:12,fill:"#FFFFFF"}),this._introText3.position.set(200,163),this._introScreen.addChild(this._introText3),this._runner._renderer.render(this._introScreen))}},{key:"_setupClickScreen",value:function _setupClickScreen(){if(!0===this._click){this._updateIntroScreen("Click with the mouse on this screen to continue.");var e=function(t){this._runner._renderer.view.removeEventListener("click",e),this._clearIntroScreen(),this._runner._initialize()}.bind(this);this._runner._renderer.view.addEventListener("click",e,!1)}else this._clearIntroScreen(),this._runner._initialize()}},{key:"_clearIntroScreen",value:function _clearIntroScreen(){if(!0===this._active){for(var e=this._introScreen.children.length-1;e>=0;e--)this._introScreen.removeChild(this._introScreen.children[e]);this._runner._renderer.render(this._introScreen)}}},{key:"_updateProgressBar",value:function _updateProgressBar(e){if(!0===this._active)switch(e){case-1:this._progressBarOuter=new o.Graphics,this._progressBarOuter.lineStyle(1,16777215,1),this._progressBarOuter.drawRect(200,200,400,20),this._progressBarOuter.x=0,this._progressBarOuter.y=0,this._progressBarInner=new o.Graphics,this._progressBarInner.lineStyle(1,16777215,1),this._progressBarInner.drawRect(202,202,1,16),this._progressBarInner.x=0,this._progressBarInner.y=0,this._introScreen.addChild(this._progressBarInner),this._introScreen.addChild(this._progressBarOuter),this._runner._renderer.render(this._introScreen);break;case 100:this._introScreen.removeChild(this._progressBarInner),this._introScreen.removeChild(this._progressBarOuter),this._runner._renderer.render(this._introScreen);break;default:this._progressBarOuter.beginFill(16777215),this._progressBarOuter.drawRect(202,202,Math.round(396*e),16),this._progressBarOuter.endFill(),this._runner._renderer.render(this._introScreen)}}},{key:"_updateIntroScreen",value:function _updateIntroScreen(e){!0===this._active&&(this._introText3.text=e,this._runner._renderer.render(this._introScreen))}},{key:"_showPauseScreen",value:function _showPauseScreen(){(0,s.isFunction)(this._runner._confirm)&&this._runner._confirm("Esc key pressed, pausing experiment.","Please press ok the resume the experiment otherwise cancel to stop.",this._onPauseScreenConfirm.bind(this),this._onPauseScreenCancel.bind(this))}},{key:"_onPauseScreenConfirm",value:function _onPauseScreenConfirm(){this._runner._events._state=this._runner._events._statePrevious}},{key:"_onPauseScreenCancel",value:function _onPauseScreenCancel(){this._runner._finalize()}}]),Screen}();t.default=i},"./src/js/osweb/system/session.js":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function Session(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Session),this._date=null,this._runner=e,this._session=null}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Session,[{key:"_initialize",value:function _initialize(){this._runner._screen._updateIntroScreen("Retrieving session information."),this._getSessionInformation()}},{key:"_getSessionInformation",value:function _getSessionInformation(){this._date=new Date,this._session={browser:{codename:navigator.appCodeName,name:navigator.appName,version:navigator.appVersion},date:{startdate:("0"+this._date.getDate()).slice(-2)+"-"+("0"+this._date.getMonth()).slice(-2)+"-"+("0"+this._date.getFullYear()).slice(-2),starttime:("0"+this._date.getHours()).slice(-2)+":"+("0"+this._date.getMinutes()).slice(-2)+":"+("0"+this._date.getSeconds()).slice(-2),startdateUTC:("0"+this._date.getUTCDate()).slice(-2)+"-"+("0"+this._date.getUTCMonth()).slice(-2)+"-"+("0"+this._date.getUTCFullYear()).slice(-2)},experiment:{debug:0,parameters:0,pilot:0,taskname:0,taskversion:0},screen:{availableHeight:screen.availHeight,availableWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,outerheight:window.outerheight,outerwidth:window.outerwidth,pixelDepth:screen.pixelDepth,screenX:window.screenX,screenY:window.screenY,width:screen.width},system:{os:navigator.platform}}}}]),Session}();t.default=n},"./src/js/osweb/system/transfer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./node_modules/webfontloader/webfontloader.js")),s=r("./src/js/osweb/system/util.js"),o=_interopRequireDefault(r("./node_modules/lodash/isString.js")),i=_interopRequireDefault(r("./node_modules/lodash/isObject.js")),a=_interopRequireDefault(r("./node_modules/axios/index.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,n,s,o,i){try{var a=e[o](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,s)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,s,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,s,_next,_throw,"throw",e)}_next(void 0)})}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _asyncIterator(e){var t;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var u=function(){function Transfer(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Transfer),this._runner=e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Transfer,[{key:"_readSource",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n;return regeneratorRuntime.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if((0,o.default)(e)||(0,i.default)(e)&&e.constructor===File){a.next=2;break}throw new Error("No osexp source file defined.");case 2:if(e.constructor!==File){a.next=14;break}return a.prev=3,a.next=6,this._readOsexpFromFile(e);case 6:t=a.sent,a.next=12;break;case 9:throw a.prev=9,a.t0=a.catch(3),new Error("Could not read local osexp, ".concat(a.t0));case 12:a.next=38;break;case 14:if(!(0,o.default)(e)){a.next=38;break}if(!1===(r=(0,s.parseUrl)(e))){a.next=31;break}return a.prev=17,a.next=20,this.fetch(r.href);case 20:return n=a.sent,a.next=23,this._readOsexpFromFile(n);case 23:t=a.sent,a.next=29;break;case 26:throw a.prev=26,a.t1=a.catch(17),new Error("Could not read remote osexp, ".concat(a.t1));case 29:a.next=38;break;case 31:a.prev=31,t=this._processScript(e),a.next=38;break;case 35:throw a.prev=35,a.t2=a.catch(31),new Error("Could not read source string, ".concat(a.t2,"\n\n").concat(e));case 38:return a.next=40,this._readWebFonts();case 40:return a.abrupt("return",t);case 41:case"end":return a.stop()}},_callee,this,[[3,9],[17,26],[31,35]])}));return function _readSource(t){return e.apply(this,arguments)}}()},{key:"_readOsexpFromString",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(e.constructor!==File){t.next=4;break}return t.next=3,(0,s.readFileAsText)(e);case 3:e=t.sent;case 4:return t.abrupt("return",this._processScript(e));case 5:case"end":return t.stop()}},_callee2,this)}));return function _readOsexpFromString(t){return e.apply(this,arguments)}}()},{key:"_readOsexpFromFile",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r,n,o,i,a=this;return regeneratorRuntime.wrap(function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,this._readOsexpFromString(e);case 3:return u.abrupt("return",u.sent);case 6:u.prev=6,u.t0=u.catch(0),this._runner._debugger.addMessage("Could not read osexp file as plain text: ".concat(u.t0.message,".\nFile is probably binary"));case 9:return u.next=11,(0,s.decompress)(e,function(e){return a._runner._screen._updateProgressBar(e)});case 11:if(t=u.sent,-1!==(r=t.findIndex(function(e){return"script.opensesame"===e.name}))){u.next=15;break}throw new Error("Could not locate experiment script");case 15:return n=t.splice(r,1)[0],o=this._processScript(n.readAsString()),i=t.filter(function(e){return"0"===e.type}),u.next=20,this._processOsexpPoolItems(i);case 20:return u.abrupt("return",o);case 21:case"end":return u.stop()}},_callee3,this,[[0,6]])}));return function _readOsexpFromFile(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,r=this;return regeneratorRuntime.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.default.get(e,{responseType:"blob",onDownloadProgress:function onDownloadProgress(e){e.lengthComputable&&r._runner._screen._updateProgressBar(e.loaded/e.total)}});case 2:return t=n.sent,n.abrupt("return",new File([t.data],"downloaded.osexp"));case 4:case"end":return n.stop()}},_callee4,this)}));return function fetch(t){return e.apply(this,arguments)}}()},{key:"_processScript",value:function _processScript(e){if("---"!==e.substr(0,3))throw new Error("Specified script file is not valid OpenSesame script");return this._runner._screen._updateProgressBar(100),e}},{key:"_processOsexpPoolItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e){var t,r,n,s,o,i,a,u;return regeneratorRuntime.wrap(function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:t=_defineProperty({currentIndex:0,next:function next(){var t=e[this.currentIndex];if(!t)return{value:void 0,done:!0};var r={data:null,folder:t.name.match(/(.*)[/\\]/)[1]||"",name:t.name.replace(/^.*[\\/]/,""),size:t.size,type:"undefined"},n=t.name.substr(t.name.lastIndexOf(".")+1);if("jpg"===n||"png"===n){var s=new Image;s.src=t.getBlobUrl(),r.data=s,r.type="image"}else if("wav"===n||"ogg"===n){var o=new Audio;o.src=t.getBlobUrl(),r.data=o,r.type="sound"}else if("ogv"===n){var i=document.createElement("VIDEO");i.src=t.getBlobUrl(),r.data=i,r.type="video"}return this.currentIndex++,{value:r,done:!1}}},Symbol.asyncIterator,function(){return this}),r=!0,n=!1,l.prev=3,o=_asyncIterator(t);case 5:return l.next=7,o.next();case 7:return i=l.sent,r=i.done,l.next=11,i.value;case 11:if(a=l.sent,r){l.next=19;break}u=a,this._runner._pool.add(u),this._runner._screen._updateProgressBar(t.currentIndex/e.length);case 16:r=!0,l.next=5;break;case 19:l.next=25;break;case 21:l.prev=21,l.t0=l.catch(3),n=!0,s=l.t0;case 25:if(l.prev=25,l.prev=26,r||null==o.return){l.next=30;break}return l.next=30,o.return();case 30:if(l.prev=30,!n){l.next=33;break}throw s;case 33:return l.finish(30);case 34:return l.finish(25);case 35:return l.abrupt("return",!0);case 36:case"end":return l.stop()}},_callee5,this,[[3,21,25,35],[26,,30,34]])}));return function _processOsexpPoolItems(t){return e.apply(this,arguments)}}()},{key:"_readWebFonts",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){return regeneratorRuntime.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return this._runner._screen._updateProgressBar(100),this._runner._screen._updateIntroScreen("Retrieving required webfonts."),e.abrupt("return",new Promise(function(e,t){n.default.load({google:{families:["Droid Sans","Droid Serif","Droid Sans Mono"],urls:["//fonts.googleapis.com/css?family=Droid Sans","//fonts.googleapis.com/css?family=Droid Serif","//fonts.googleapis.com/css?family=Droid Sans Mono"]},active:function active(){return e()},inactive:function inactive(){return t(new Error("Could not load webfonts"))}})}));case 3:case"end":return e.stop()}},_callee6,this)}));return function _readWebFonts(){return e.apply(this,arguments)}}()},{key:"_writeDataFile",value:function _writeDataFile(e,t){if(null!==e&&null!==t){var r=new FormData;r.append("data",t.toString());var n=new XMLHttpRequest;return n.open("post",e+"?file=subject-"+this._runner._experiment.vars.subject_nr,!0),n.send(r)}}}]),Transfer}();t.default=u},"./src/js/osweb/system/util.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompress=function decompress(e,t){return _decompress.apply(this,arguments)},t.readFileAsText=function readFileAsText(e){var t=new FileReader;return new Promise(function(r,n){t.onerror=function(){t.abort(),n(new DOMException("Problem parsing input file."))},t.onload=function(){r(t.result)},t.readAsText(e)})},t.parseUrl=function parseUrl(e){try{var t=function getHost(){return"null"!==window.location.origin?window.location.origin:"http://nodejs.test"}();return new URL(e,t)}catch(e){return!1}};var n=_interopRequireDefault(r("./node_modules/pako/index.js")),s=_interopRequireDefault(r("./node_modules/lodash/isFunction.js")),o=_interopRequireDefault(r("./node_modules/js-untar/build/dist/untar.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,s,o,i){try{var a=e[o](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,s)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function FileStreamer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65536;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FileStreamer),this.file=e,this.offset=0,this.chunkSize=t,this.rewind()}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FileStreamer,[{key:"rewind",value:function rewind(){this.offset=0}},{key:"isEndOfFile",value:function isEndOfFile(){return this.offset>=this.getFileSize()}},{key:"readBlock",value:function readBlock(){var e=this,t=new FileReader,r=this.file.slice(this.offset,this.offset+this.chunkSize);return new Promise(function(n,s){t.onloadend=function(t){var r=t.target;if(r.error)return s(r.error);e.offset+=r.result.byteLength,n({data:r.result,progress:Math.min(e.offset/e.file.size,1)})},t.readAsArrayBuffer(r)})}},{key:"getFileSize",value:function getFileSize(){return this.file.size}}]),FileStreamer}();function _decompress(){return(_decompress=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,s,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,s,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(e,t){var r,a,u;return regeneratorRuntime.wrap(function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=new i(e),a=new n.default.Inflate;case 2:if(r.isEndOfFile()){l.next=12;break}return l.next=5,r.readBlock();case 5:if(u=l.sent,a.push(u.data,r.isEndOfFile()),!a.err){l.next=9;break}throw a.msg;case 9:(0,s.default)(t)&&t(u.progress),l.next=2;break;case 12:return l.abrupt("return",(0,o.default)(a.result.buffer));case 13:case"end":return l.stop()}},_callee,this)}))).apply(this,arguments)}},"./src/js/osweb/widgets/button.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/widget.js")),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),o=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function ButtonWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ButtonWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(ButtonWidget).call(this,e,t))).center=void 0===t.center||"yes"===t.center,r.frame=void 0===t.frame||"yes"===t.frame,r.text=t.text,r.type="button",r.var=void 0!==t.var?t.var:r.var,r.set_var(!1,r.var),r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ButtonWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ButtonWidget,[{key:"draw_text",value:function draw_text(e,t){var r={fontFamily:this.form._canvas._styles.font_family,fontSize:this.form.experiment.vars.font_size,fontStyle:"yes"===this.form.experiment.vars.font_italic?"italic":"normal",fontWeight:"yes"===this.form.experiment.vars.font_bold?"bold":"normal",fill:this.form.experiment.vars.foreground},n=new s.Text(e,r);!0===this.center?(n.x=(this._container._width-n.width)/2,n.y=(this._container._height-n.height)/2):(n.x=5,n.y=5),this._container.addChild(n)}},{key:"render",value:function render(){"no"===this.form.item.vars.only_render&&!1===this._container.interactive&&(this._container.interactive=!0,this._container.buttonMode=!0,this._container.hitArea=new s.Rectangle(0,0,this._container._width,this._container._height),this._container.on("mousedown",function(e){this.response(e)}.bind(this))),!0===this.frame&&this.draw_frame();var e=this.form.experiment.syntax.eval_text(this.text,null,!1);this.draw_text(e)}},{key:"response",value:function response(e){this.set_var(!0,this.var),null===this.form.timeout?this.form.item._complete():this.form.experiment._runner._events._currentItem._status=o.constants.STATUS_FINALIZE}}]),ButtonWidget}();t.default=i},"./src/js/osweb/widgets/checkbox.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/widget.js")),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),o=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function CheckBoxWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CheckBoxWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(CheckBoxWidget).call(this,e))).checked=void 0!==t.checked&&"yes"===t.checked,r.click_accepts=void 0!==t.click_accepts&&"yes"===t.click_accepts,r.frame=void 0!==t.frame&&"yes"===t.frame,r.group=void 0!==t.group?t.group:null,r.text=void 0!==t.text?t.text:"",r.var=void 0!==t.var?t.var:null,r.type="checkbox",r._checkbox=null,r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CheckBoxWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(CheckBoxWidget,[{key:"draw_text",value:function draw_text(e,t){var r={fontFamily:this.form._canvas._styles.font_family,fontSize:this.form.experiment.vars.font_size,fontStyle:"yes"===this.form.experiment.vars.font_italic?"italic":"normal",fontWeight:"yes"===this.form.experiment.vars.font_bold?"bold":"normal",fill:this.form.experiment.vars.foreground},n=new s.Text(e,r);n.x=24,n.y=5;var o=new s.Graphics;o.lineStyle(1,0),o.moveTo(1,0),o.lineTo(13,0),o.moveTo(14,1),o.lineTo(14,13),o.moveTo(0,1),o.lineTo(0,13),o.moveTo(1,14),o.lineTo(13,14),o.x=5,o.y=7;var i=new s.Graphics;i.lineStyle(1,16777215,1),i.beginFill(16777215),i.drawRect(1,1,12,12),i.endFill(),i.x=5,i.y=7,this._checkbox=new s.Graphics,this._checkbox.lineStyle(1,307216),this._checkbox.moveTo(4,5),this._checkbox.lineTo(7,12),this._checkbox.lineTo(12,3),this._checkbox.x=5,this._checkbox.y=7,this._checkbox.visible=!1,this._container.addChild(o),this._container.addChild(i),this._container.addChild(this._checkbox),this._container.addChild(n)}},{key:"render",value:function render(){!1===this._container.interactive&&(this._container.interactive=!0,this._container.buttonMode=!0,this._container.hitArea=new s.Rectangle(0,0,this._container._width,this._container._height),this._container.on("mousedown",function(e){this.response(e)}.bind(this))),this._container.removeChildren(),!0===this.frame&&this.draw_frame();var e=this.form.experiment.syntax.eval_text(this.text,null,!1);this.draw_text(e),this.set_checked(this.checked)}},{key:"set_checked",value:function set_checked(e){this.checked=e,this._checkbox.visible=e,this.form._canvas.show(this.form.experiment),this.set_var(e)}},{key:"response",value:function response(e){if(null!==this.group){for(var t=0;t<this.form.widgets.length;t++)"checkbox"===this.form.widgets[t].type&&this.form.widgets[t]!==this&&this.form.widgets[t].group===this.group&&this.form.widgets[t].set_checked(!1);this.set_checked(!0)}else this.set_checked(!this.checked);!0===this.click_accepts&&(null===this.form.timeout?this.form.item._complete():this.form.experiment._runner._events._currentItem._status=o.constants.STATUS_FINALIZE)}},{key:"set_var",value:function set_var(e,t){var r=void 0!==t?t:this.var;if(null!==r){for(var n=[],s=0;s<this.form.widgets.length;s++)"checkbox"===this.form.widgets[s].type&&this.form.widgets[s].var===this.var&&!0===this.form.widgets[s].checked&&n.push(this.form.widgets[s].text);n===[]?_get(_getPrototypeOf(CheckBoxWidget.prototype),"set_var",this).call(this,"no",r):_get(_getPrototypeOf(CheckBoxWidget.prototype),"set_var",this).call(this,n.join(";"),r)}}}]),CheckBoxWidget}();t.default=i},"./src/js/osweb/widgets/form.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/backends/canvas.js")),s=_interopRequireDefault(r("./src/js/osweb/widgets/themes.js")),o=r("./src/js/osweb/system/constants.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function FormWidget(e,t,r,o,i,a,u,l,c){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FormWidget),this.clicks=c,this.cols=t,this.experiment=e,this.height=this.experiment.vars.height,this.item=null!==u?u:e,this.margins=i,this.rows=r,this.spacing=o,this.span=[],this.theme=a,this.timeout=l,this.widgets=[],this.width=this.experiment.vars.width,this.colNr=0;for(var _=0;_<t.length;_++)this.colNr=this.colNr+Number(t[_]);this.rowNr=0;for(var f=0;f<r.length;f++)this.rowNr=this.rowNr+Number(r[f]);this._groupId=0,this._canvas=new n.default(this.experiment,!1),this._canvas._styles.background_color=e.vars.background,this._canvas._container.height=e.vars.height,this._canvas._container.width=e.vars.width,this._canvas._styles.font_family=e.vars.font_family,this._themes=new s.default}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(FormWidget,[{key:"_getGroupId",value:function _getGroupId(){return this._groupId++}},{key:"_exec",value:function _exec(e){this.render(),null!==e&&e.setFocus(),this.experiment._runner._events._state=o.constants.TIMER_FORM,this.experiment._runner._renderer.view.style.cursor="default",this.item.set_item_onset(),null!==this.timeout&&null!==this.item&&this.item.sleep(this.timeout)}},{key:"render",value:function render(){this._canvas._container.removeChildren();for(var e=0;e<this.widgets.length;e++)this._canvas._container.addChild(this.widgets[e]._container),this.widgets[e].render();this._canvas.show(this.experiment)}},{key:"set_widget",value:function set_widget(e,t,r,n){for(var s=this.experiment.vars.width-Number(this.margins[1])-Number(this.margins[3]),o=this.experiment.vars.height-Number(this.margins[0])-Number(this.margins[2]),i=Number(this.margins[3])+Number(this.spacing),a=0;a<Number(t[0]);a++)i+=Number(this.cols[a])/this.colNr*s;for(var u=Number(this.margins[0])+Number(this.spacing),l=0;l<Number(t[1]);l++)u+=Number(this.rows[l])/this.rowNr*o;for(var c=0,_=Number(Number(t[0])+Number(r)),f=Number(t[0]);f<_;f++)c+=Number(this.cols[f]);c=c/this.colNr*s-2*Number(this.spacing);var p=0;_=Number(Number(t[1])+Number(n));for(var h=Number(t[1]);h<_;h++)p+=Number(this.rows[h]);p=p/this.rowNr*o-2*Number(this.spacing),e._container.width=Math.round(c),e._container.height=Math.round(p),e._container.x=Math.round(i),e._container.y=Math.round(u),this.widgets.push(e)}}]),FormWidget}();t.default=i},"./src/js/osweb/widgets/image_button.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/image_widget.js")),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),o=r("./src/js/osweb/system/constants.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function ImageButtonWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ImageButtonWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(ImageButtonWidget).call(this,e,t))).type="image_button",r.var=void 0!==t.var?t.var:null,r.set_var(!1,r.var),r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ImageButtonWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ImageButtonWidget,[{key:"render",value:function render(){"no"===this.form.item.vars.only_render&&!1===this._container.interactive&&(this._container.interactive=!0,this._container.buttonMode=!0,this._container.hitArea=new s.Rectangle(0,0,this._container._width,this._container._height),this._container.on("mousedown",function(e){this.response(e)}.bind(this))),_get(_getPrototypeOf(ImageButtonWidget.prototype),"render",this).call(this)}},{key:"response",value:function response(e){this.set_var(!0,this.var),null===this.form.timeout?this.form.item._complete():this.form.experiment._runner._events._currentItem._status=o.constants.STATUS_FINALIZE}}]),ImageButtonWidget}();t.default=i},"./src/js/osweb/widgets/image_widget.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/widget.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function ImageWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ImageWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(ImageWidget).call(this,e))).adjust=void 0===t.adjust||"true"===t.adjust,r.frame=void 0!==t.frame&&"yes"===t.frame,r.path=void 0!==t.path?t.path:null,r.type="image",r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ImageWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(ImageWidget,[{key:"render",value:function render(){this._container.removeChildren(),!0===this.frame&&this.draw_frame();var e=this.form.experiment._runner._syntax.remove_quotes(this.path),t=this.form.experiment._runner._pool[e].data,r=document.createElement("canvas");r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);var n=new PIXI.Sprite(PIXI.Texture.fromCanvas(r));if(!0===this.adjust){var s=t.width/t.height;this._container._height>=this._container._width?(n.width=this._container._width,n.height=s*this._container._width,n.x=0,n.y=(this._container._height-n.height)/2):(n.height=this._container._height,n.width=s*this._container._height,n.x=(this._container._width-n.width)/2,n.y=0)}else n.x=this._container._width/2-n.width/2,n.y=this._container._height/2-n.height/2;this._container.addChild(n)}}]),ImageWidget}();t.default=s},"./src/js/osweb/widgets/label.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js")),s=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/widget.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function LabelWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LabelWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(LabelWidget).call(this,e))).center=void 0===t.center||"yes"===t.center,r.frame=void 0!==t.frame&&"yes"===t.frame,r.text=t.text,r.type="label",r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(LabelWidget,s.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(LabelWidget,[{key:"text_lines",value:function text_lines(e,t,r,n){var s=document.createElement("canvas");s.width=800,s.height=600;var o=s.getContext("2d");o.font=n.fontSize+"px "+n.fontFamily,"bold"===n.fontWeight&&(o.font="bold "+o.font),"italic"===n.fontStyle&&(o.font="italic "+o.font);for(var i=e.split(" "),a=[],u="",l=0;i.length>0;){var c=i.shift(),_=o.measureText(c+" ").width;"<br/>"===c?(a.push(u),u="",l=_):l+_>t?(a.push(u),u=c,l=_):(u=""===u?c:u+" "+c,l+=_)}return a.push(u),a}},{key:"draw_text",value:function draw_text(e,t){for(var r={fontFamily:this.form._canvas._styles.font_family,fontSize:this.form.experiment.vars.font_size,fontStyle:"yes"===this.form.experiment.vars.font_italic?"italic":"normal",fontWeight:"yes"===this.form.experiment.vars.font_bold?"bold":"normal",fill:this.form.experiment.vars.foreground},s=this.text_lines(e,this._container._width-10,this._container._height-10,r),o=this.form._canvas._getTextBaseline("MgyQ",r.fontFamily,r.fontSize,r.fontWeight),i=!0===this.center?(this._container._height-s.length*o.height)/2:5,a=0;a<s.length;a++){var u=new n.Text(s[a],r);u.x=Math.round(!0===this.center?(this._container._width-u.width)/2:5),u.y=Math.round(i),i+=o.height,this._container.addChild(u)}}},{key:"render",value:function render(){this._container.removeChildren(),!0===this.frame&&this.draw_frame();var e=this.form.experiment.syntax.eval_text(this.text,this.form.item.vars,!1);this.draw_text(e)}}]),LabelWidget}();t.default=o},"./src/js/osweb/widgets/rating_scale.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./src/js/osweb/widgets/widget.js")),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,r){var n=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function RatingScaleWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RatingScaleWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(RatingScaleWidget).call(this,e))).click_accepts=void 0!==t.click_accepts&&"yes"===t.click_accepts,r.default=void 0!==t.default?t.default:null,r.orientation=void 0!==t.orientation?t.orientation:"horizontal",r.nodes=void 0!==t.nodes?t.nodes:"5",r.var=void 0!==t.var?t.var:null,r.type="rating_scale",r._checkBoxes=[],r._groupId=r.form._getGroupId(),r._processNodes(),r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RatingScaleWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(RatingScaleWidget,[{key:"_processNodes",value:function _processNodes(){if(this._nodes=[],!isNaN(parseFloat(this.nodes))&&isFinite(this.nodes))for(var e=0;e<Number(this.nodes);e++)this._nodes.push("");else for(var t=this.nodes.split(";"),r=0;r<t.length;r++)this._nodes.push(t[r])}},{key:"_drawBorder",value:function _drawBorder(e,t,r,n){var o=new s.Graphics;o.lineStyle(1,this.form._canvas._styles._convertColorValue(this.form._themes.theme.gray.backgroundColor),1),o.drawRect(e,t,r,n),o.x=0,o.y=0,this._container.addChild(o)}},{key:"_drawCheckBox",value:function _drawCheckBox(e,t){var r=new s.Graphics;r.lineStyle(1,0),r.moveTo(1,0),r.lineTo(13,0),r.moveTo(14,1),r.lineTo(14,13),r.moveTo(0,1),r.lineTo(0,13),r.moveTo(1,14),r.lineTo(13,14),r.x=5,r.y=7;var n=new s.Graphics;n.lineStyle(1,16777215,1),n.beginFill(16777215),n.drawRect(1,1,12,12),n.endFill(),n.x=5,n.y=7;var o=new s.Graphics;o.lineStyle(1,307216),o.moveTo(4,5),o.lineTo(7,12),o.lineTo(12,3),o.x=5,o.y=7,o.visible=!1;var i=new s.Container;i.addChild(r),i.addChild(n),i.addChild(o),i.x=e,i.y=t,this._container.addChild(i),this._checkBoxes.push(i),i.interactive=!0,i.buttonMode=!0,i.hitArea=new s.Rectangle(0,5,15,15),i.on("mousedown",function(e){this.response(e)}.bind(this))}},{key:"_drawText",value:function _drawText(e,t,r,n){var o={fontFamily:this.form._canvas._styles.font_family,fontSize:this.form.experiment.vars.font_size,fontStyle:"yes"===this.form.experiment.vars.font_italic?"italic":"normal",fontWeight:"yes"===this.form.experiment.vars.font_bold?"bold":"normal",fill:this.form.experiment.vars.foreground},i=this.form._canvas._getTextBaseline(r,o.fontFamily,o.fontSize,o.fontWeight),a=new s.Text(r,o);!0===n?(a.x=e-a.width/2+15,a.y=t-i.height):(a.x=e-a.width-15,a.y=t+2),this._container.addChild(a)}},{key:"render",value:function render(){"no"===this.form.item.vars.only_render&&!1===this._container.interactive&&(this._container.interactive=!0,this._container.buttonMode=!0,this._container.hitArea=new s.Rectangle(0,0,this._container._width,this._container._height)),this._checkBoxes=[],this._container.removeChildren();var e=this._container._width/2,t=this._container._height/2,r=this.form._themes.theme.gray.box_size;if("horizontal"===this.orientation){var n=(1*this._container._width-3*r)/(this._nodes.length-1);this._drawBorder(0,t-.5*r,this._container._width,2*r);for(var o=r,i=0;i<this._nodes.length;i++){this._drawCheckBox(o,t-5);var a=this.form.experiment.syntax.eval_text(this._nodes[i],null,!1);this._drawText(o,t-8,a,!0),o+=n}}else{var u=(1*this._container._height-3*r)/(this._nodes.length-1);this._drawBorder(e-.5*r,0,2*r,this._container._height);for(var l=r,c=0;c<this._nodes.length;c++){this._drawCheckBox(e-5,l);var _=this.form.experiment.syntax.eval_text(this._nodes[c],null,!1);this._drawText(e-8,l,_,!1),l+=u}}null!==this.default&&(this._checkBoxes[Number(this.default)].children[2].visible=!0,this.set_value(Number(this.default)))}},{key:"response",value:function response(e){for(var t=0;t<this._checkBoxes.length;t++)this._checkBoxes[t]===e.currentTarget?(this._checkBoxes[t].children[2].visible=!0,this.set_value(t)):this._checkBoxes[t].children[2].visible=!1}},{key:"set_value",value:function set_value(e){null===e&&(e<0||e>this._nodes.length)?this.form.experiment._runner._debugger.addError("Trying to select a non-existing node. Did you specify an incorrect default value?"):(this.value=e,this.set_var(e))}},{key:"set_var",value:function set_var(e,t){var r=void 0!==t?t:this.var;if(null!==r){for(var n=[],s=0;s<this.form.widgets.length;s++)"checkbox"===this.form.widgets[s].type&&this.form.widgets[s].var===this.var&&!0===this.form.widgets[s].checked&&n.push(this.form.widgets[s].text);n===[]?_get(_getPrototypeOf(RatingScaleWidget.prototype),"set_var",this).call(this,"no",r):_get(_getPrototypeOf(RatingScaleWidget.prototype),"set_var",this).call(this,n.join(";"),r)}}}]),RatingScaleWidget}();t.default=o},"./src/js/osweb/widgets/text_input.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(r("./src/js/osweb/widgets/widget.js")),s=r("./src/js/osweb/system/constants.js"),o=_interopRequireDefault(r("./src/js/dependencies/PixiTextInput.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function TextInputWidget(e,t){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TextInputWidget),(r=_possibleConstructorReturn(this,_getPrototypeOf(TextInputWidget).call(this,e))).center=void 0!==t.center&&"yes"===t.center,r.focus=!1,r.frame=void 0===t.frame||"yes"===t.frame,r.stub=void 0!==t.stub?t.stub:"Type here...",r.text=void 0!==t.text?t.text:"",r.var=void 0!==t.var?t.var:null,r.return_accepts=void 0!==t.return_accepts&&"yes"===t.return_accepts,r.type="text_input",r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TextInputWidget,n.default),function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(TextInputWidget,[{key:"setFocus",value:function setFocus(){this.focus=!0}},{key:"response",value:function response(e,t){e.set_var(e.inputField.text,e.var),13===t.keyCode&&!0===e.return_accepts&&(null===e.form.timeout?e.form.item._complete():e.form.experiment._runner._events._currentItem._status=s.constants.STATUS_FINALIZE)}},{key:"draw_text",value:function draw_text(e,t){var r=new PIXI.Graphics;r.lineStyle(1,this.form._canvas._styles._convertColorValue(this.form.experiment.vars.background,"number"),1),r.beginFill(this.form._canvas._styles._convertColorValue(this.form.experiment.vars.background,"number")),r.drawRect(1,1,this._container._width-2,this._container._height-2),r.endFill(),r.x=0,r.y=0,this._container.addChild(r);var n={fontFamily:this.form._canvas._styles.font_family,fontSize:this.form.experiment.vars.font_size,fontStyle:"yes"===this.form.experiment.vars.font_italic?"italic":"normal",fontWeight:"yes"===this.form.experiment.vars.font_bold?"bold":"normal",fill:this.form.experiment.vars.foreground};this.inputField=new o.default(e,n),this.inputField.backgroundColor=this.form._canvas._styles._convertColorValue(this.form.experiment.vars.background,"number"),this.inputField.x=5,this.inputField.y=5,this.inputField.width=this._container._width-10,this.inputField.update=this.response,this.inputField.widget=this,this.inputField.focus(),this._container.addChild(this.inputField)}},{key:"render",value:function render(){this._container.removeChildren(),!0===this.frame&&this.draw_frame(),this.draw_text(this.text)}}]),TextInputWidget}();t.default=i},"./src/js/osweb/widgets/themes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function Themes(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Themes),this.theme=[],this.theme.gray={backgroundColor:"#888a85",box_size:16,lineColorLeftTop:"#babdb6",lineColorRightBottom:"#555753"}}},"./src/js/osweb/widgets/widget.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r("./node_modules/pixi.js/lib/index.js"));function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function Widget(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Widget),this.focus=!1,this.form=e,this.rect=null,this.type="widget",this.var=null,this._container=new n.Container}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(Widget,[{key:"draw_frame",value:function draw_frame(e,t){var r=new n.Graphics;r.lineStyle(1,this.form._canvas._styles._convertColorValue(this.form._themes.theme.gray.lineColorLeftTop),1),r.moveTo(this._container._width,0),r.lineTo(0,0),r.lineTo(0,this._container._height),r.lineStyle(1,this.form._canvas._styles._convertColorValue(this.form._themes.theme.gray.lineColorRightBottom),1),r.lineTo(this._container._width,this._container._height),r.lineTo(this._container._width,0),r.x=0,r.y=0;var s=new n.Graphics;s.lineStyle(1,this.form._canvas._styles._convertColorValue(this.form._themes.theme.gray.backgroundColor),1),s.beginFill(this.form._canvas._styles._convertColorValue(this.form._themes.theme.gray.backgroundColor)),s.drawRect(1,1,this._container._width-2,this._container._height-2),s.endFill(),s.x=0,s.y=0,this._container.addChild(s),this._container.addChild(r)}},{key:"set_var",value:function set_var(e,t){null===t&&(t=this.var),null!==t&&this.form.experiment.vars.set(t,e)}}]),Widget}();t.default=s},"./src/scss/osweb.scss":function(e,t,r){},0:function(e,t,r){r("./node_modules/@babel/polyfill/lib/index.js"),e.exports=r("./src/app.js")}});